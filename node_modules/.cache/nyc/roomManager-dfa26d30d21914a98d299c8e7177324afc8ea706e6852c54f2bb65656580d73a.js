function cov_1huth90sfx(){var path="/Users/tuanpnm/Class/SE181/realtime_interactive_chess/roomManager.js";var hash="1ed07fc80b1d68001ca2f5c5e43947e5e369719b";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/tuanpnm/Class/SE181/realtime_interactive_chess/roomManager.js",statementMap:{"0":{start:{line:4,column:4},end:{line:4,column:27}},"1":{start:{line:5,column:4},end:{line:5,column:26}},"2":{start:{line:6,column:4},end:{line:6,column:43}},"3":{start:{line:7,column:4},end:{line:7,column:25}},"4":{start:{line:9,column:4},end:{line:9,column:81}},"5":{start:{line:13,column:4},end:{line:17,column:8}},"6":{start:{line:14,column:6},end:{line:17,column:8}},"7":{start:{line:18,column:4},end:{line:21,column:6}},"8":{start:{line:24,column:22},end:{line:24,column:53}},"9":{start:{line:25,column:4},end:{line:26,column:25}},"10":{start:{line:26,column:6},end:{line:26,column:25}},"11":{start:{line:27,column:4},end:{line:27,column:53}},"12":{start:{line:28,column:4},end:{line:33,column:5}},"13":{start:{line:29,column:6},end:{line:32,column:7}},"14":{start:{line:34,column:4},end:{line:38,column:8}},"15":{start:{line:35,column:6},end:{line:38,column:8}},"16":{start:{line:40,column:15},end:{line:40,column:37}},"17":{start:{line:42,column:4},end:{line:47,column:5}},"18":{start:{line:43,column:6},end:{line:46,column:26}},"19":{start:{line:44,column:8},end:{line:44,column:26}},"20":{start:{line:46,column:8},end:{line:46,column:26}},"21":{start:{line:48,column:4},end:{line:48,column:41}},"22":{start:{line:49,column:14},end:{line:49,column:32}},"23":{start:{line:50,column:4},end:{line:53,column:5}},"24":{start:{line:51,column:6},end:{line:51,column:25}},"25":{start:{line:52,column:6},end:{line:52,column:39}},"26":{start:{line:54,column:4},end:{line:57,column:6}},"27":{start:{line:60,column:22},end:{line:60,column:53}},"28":{start:{line:61,column:4},end:{line:62,column:25}},"29":{start:{line:62,column:6},end:{line:62,column:25}},"30":{start:{line:64,column:4},end:{line:68,column:8}},"31":{start:{line:65,column:6},end:{line:68,column:8}},"32":{start:{line:70,column:4},end:{line:75,column:5}},"33":{start:{line:71,column:6},end:{line:74,column:7}},"34":{start:{line:76,column:17},end:{line:76,column:39}},"35":{start:{line:78,column:19},end:{line:78,column:56}},"36":{start:{line:79,column:6},end:{line:85,column:7}},"37":{start:{line:87,column:6},end:{line:87,column:42}},"38":{start:{line:89,column:6},end:{line:92,column:8}},"39":{start:{line:95,column:18},end:{line:95,column:40}},"40":{start:{line:96,column:4},end:{line:96,column:38}},"41":{start:{line:97,column:4},end:{line:97,column:19}},"42":{start:{line:100,column:4},end:{line:101,column:19}},"43":{start:{line:101,column:6},end:{line:101,column:19}},"44":{start:{line:102,column:4},end:{line:102,column:42}},"45":{start:{line:105,column:4},end:{line:106,column:18}},"46":{start:{line:106,column:6},end:{line:106,column:18}},"47":{start:{line:107,column:18},end:{line:107,column:44}},"48":{start:{line:109,column:4},end:{line:109,column:34}},"49":{start:{line:112,column:4},end:{line:113,column:19}},"50":{start:{line:113,column:6},end:{line:113,column:19}},"51":{start:{line:114,column:4},end:{line:114,column:40}},"52":{start:{line:117,column:4},end:{line:118,column:18}},"53":{start:{line:118,column:6},end:{line:118,column:18}},"54":{start:{line:119,column:4},end:{line:119,column:37}},"55":{start:{line:123,column:4},end:{line:124,column:19}},"56":{start:{line:124,column:6},end:{line:124,column:19}},"57":{start:{line:126,column:15},end:{line:126,column:37}},"58":{start:{line:127,column:4},end:{line:128,column:18}},"59":{start:{line:128,column:6},end:{line:128,column:18}},"60":{start:{line:129,column:4},end:{line:129,column:17}},"61":{start:{line:132,column:4},end:{line:133,column:19}},"62":{start:{line:133,column:6},end:{line:133,column:19}},"63":{start:{line:135,column:15},end:{line:135,column:37}},"64":{start:{line:136,column:4},end:{line:137,column:18}},"65":{start:{line:137,column:6},end:{line:137,column:18}},"66":{start:{line:139,column:4},end:{line:140,column:19}},"67":{start:{line:140,column:6},end:{line:140,column:19}},"68":{start:{line:141,column:4},end:{line:141,column:16}},"69":{start:{line:144,column:17},end:{line:144,column:42}},"70":{start:{line:145,column:4},end:{line:147,column:5}},"71":{start:{line:146,column:6},end:{line:146,column:41}},"72":{start:{line:148,column:4},end:{line:148,column:18}},"73":{start:{line:151,column:17},end:{line:151,column:42}},"74":{start:{line:152,column:4},end:{line:154,column:5}},"75":{start:{line:153,column:6},end:{line:153,column:41}},"76":{start:{line:155,column:4},end:{line:155,column:18}},"77":{start:{line:158,column:17},end:{line:158,column:48}},"78":{start:{line:159,column:13},end:{line:159,column:15}},"79":{start:{line:160,column:4},end:{line:162,column:5}},"80":{start:{line:160,column:16},end:{line:160,column:17}},"81":{start:{line:161,column:6},end:{line:161,column:69}},"82":{start:{line:163,column:4},end:{line:163,column:23}},"83":{start:{line:167,column:0},end:{line:167,column:29}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:3,column:2},end:{line:3,column:3}},loc:{start:{line:3,column:42},end:{line:11,column:3}},line:3},"1":{name:"(anonymous_1)",decl:{start:{line:12,column:2},end:{line:12,column:3}},loc:{start:{line:12,column:28},end:{line:22,column:3}},line:12},"2":{name:"(anonymous_2)",decl:{start:{line:23,column:2},end:{line:23,column:3}},loc:{start:{line:23,column:29},end:{line:58,column:3}},line:23},"3":{name:"(anonymous_3)",decl:{start:{line:59,column:2},end:{line:59,column:3}},loc:{start:{line:59,column:22},end:{line:93,column:3}},line:59},"4":{name:"(anonymous_4)",decl:{start:{line:94,column:2},end:{line:94,column:3}},loc:{start:{line:94,column:19},end:{line:98,column:3}},line:94},"5":{name:"(anonymous_5)",decl:{start:{line:99,column:2},end:{line:99,column:3}},loc:{start:{line:99,column:24},end:{line:103,column:3}},line:99},"6":{name:"(anonymous_6)",decl:{start:{line:104,column:2},end:{line:104,column:3}},loc:{start:{line:104,column:24},end:{line:110,column:3}},line:104},"7":{name:"(anonymous_7)",decl:{start:{line:111,column:2},end:{line:111,column:3}},loc:{start:{line:111,column:24},end:{line:115,column:3}},line:111},"8":{name:"(anonymous_8)",decl:{start:{line:116,column:2},end:{line:116,column:3}},loc:{start:{line:116,column:19},end:{line:120,column:3}},line:116},"9":{name:"(anonymous_9)",decl:{start:{line:122,column:2},end:{line:122,column:3}},loc:{start:{line:122,column:18},end:{line:130,column:3}},line:122},"10":{name:"(anonymous_10)",decl:{start:{line:131,column:2},end:{line:131,column:3}},loc:{start:{line:131,column:38},end:{line:142,column:3}},line:131},"11":{name:"(anonymous_11)",decl:{start:{line:143,column:2},end:{line:143,column:3}},loc:{start:{line:143,column:19},end:{line:149,column:3}},line:143},"12":{name:"(anonymous_12)",decl:{start:{line:150,column:2},end:{line:150,column:3}},loc:{start:{line:150,column:19},end:{line:156,column:3}},line:150},"13":{name:"(anonymous_13)",decl:{start:{line:157,column:2},end:{line:157,column:3}},loc:{start:{line:157,column:22},end:{line:164,column:3}},line:157}},branchMap:{"0":{loc:{start:{line:3,column:31},end:{line:3,column:41}},type:"default-arg",locations:[{start:{line:3,column:36},end:{line:3,column:41}}],line:3},"1":{loc:{start:{line:13,column:4},end:{line:17,column:8}},type:"if",locations:[{start:{line:13,column:4},end:{line:17,column:8}},{start:{line:13,column:4},end:{line:17,column:8}}],line:13},"2":{loc:{start:{line:25,column:4},end:{line:26,column:25}},type:"if",locations:[{start:{line:25,column:4},end:{line:26,column:25}},{start:{line:25,column:4},end:{line:26,column:25}}],line:25},"3":{loc:{start:{line:28,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:28,column:4},end:{line:33,column:5}},{start:{line:28,column:4},end:{line:33,column:5}}],line:28},"4":{loc:{start:{line:28,column:7},end:{line:28,column:94}},type:"binary-expr",locations:[{start:{line:28,column:7},end:{line:28,column:41}},{start:{line:28,column:45},end:{line:28,column:94}}],line:28},"5":{loc:{start:{line:34,column:4},end:{line:38,column:8}},type:"if",locations:[{start:{line:34,column:4},end:{line:38,column:8}},{start:{line:34,column:4},end:{line:38,column:8}}],line:34},"6":{loc:{start:{line:42,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:42,column:4},end:{line:47,column:5}},{start:{line:42,column:4},end:{line:47,column:5}}],line:42},"7":{loc:{start:{line:42,column:7},end:{line:42,column:47}},type:"binary-expr",locations:[{start:{line:42,column:7},end:{line:42,column:25}},{start:{line:42,column:29},end:{line:42,column:47}}],line:42},"8":{loc:{start:{line:43,column:6},end:{line:46,column:26}},type:"if",locations:[{start:{line:43,column:6},end:{line:46,column:26}},{start:{line:43,column:6},end:{line:46,column:26}}],line:43},"9":{loc:{start:{line:50,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:50,column:4},end:{line:53,column:5}},{start:{line:50,column:4},end:{line:53,column:5}}],line:50},"10":{loc:{start:{line:61,column:4},end:{line:62,column:25}},type:"if",locations:[{start:{line:61,column:4},end:{line:62,column:25}},{start:{line:61,column:4},end:{line:62,column:25}}],line:61},"11":{loc:{start:{line:64,column:4},end:{line:68,column:8}},type:"if",locations:[{start:{line:64,column:4},end:{line:68,column:8}},{start:{line:64,column:4},end:{line:68,column:8}}],line:64},"12":{loc:{start:{line:70,column:4},end:{line:75,column:5}},type:"if",locations:[{start:{line:70,column:4},end:{line:75,column:5}},{start:{line:70,column:4},end:{line:75,column:5}}],line:70},"13":{loc:{start:{line:100,column:4},end:{line:101,column:19}},type:"if",locations:[{start:{line:100,column:4},end:{line:101,column:19}},{start:{line:100,column:4},end:{line:101,column:19}}],line:100},"14":{loc:{start:{line:105,column:4},end:{line:106,column:18}},type:"if",locations:[{start:{line:105,column:4},end:{line:106,column:18}},{start:{line:105,column:4},end:{line:106,column:18}}],line:105},"15":{loc:{start:{line:112,column:4},end:{line:113,column:19}},type:"if",locations:[{start:{line:112,column:4},end:{line:113,column:19}},{start:{line:112,column:4},end:{line:113,column:19}}],line:112},"16":{loc:{start:{line:117,column:4},end:{line:118,column:18}},type:"if",locations:[{start:{line:117,column:4},end:{line:118,column:18}},{start:{line:117,column:4},end:{line:118,column:18}}],line:117},"17":{loc:{start:{line:123,column:4},end:{line:124,column:19}},type:"if",locations:[{start:{line:123,column:4},end:{line:124,column:19}},{start:{line:123,column:4},end:{line:124,column:19}}],line:123},"18":{loc:{start:{line:127,column:4},end:{line:128,column:18}},type:"if",locations:[{start:{line:127,column:4},end:{line:128,column:18}},{start:{line:127,column:4},end:{line:128,column:18}}],line:127},"19":{loc:{start:{line:127,column:7},end:{line:127,column:41}},type:"binary-expr",locations:[{start:{line:127,column:7},end:{line:127,column:22}},{start:{line:127,column:26},end:{line:127,column:41}}],line:127},"20":{loc:{start:{line:132,column:4},end:{line:133,column:19}},type:"if",locations:[{start:{line:132,column:4},end:{line:133,column:19}},{start:{line:132,column:4},end:{line:133,column:19}}],line:132},"21":{loc:{start:{line:136,column:4},end:{line:137,column:18}},type:"if",locations:[{start:{line:136,column:4},end:{line:137,column:18}},{start:{line:136,column:4},end:{line:137,column:18}}],line:136},"22":{loc:{start:{line:136,column:7},end:{line:136,column:47}},type:"binary-expr",locations:[{start:{line:136,column:7},end:{line:136,column:25}},{start:{line:136,column:29},end:{line:136,column:47}}],line:136},"23":{loc:{start:{line:139,column:4},end:{line:140,column:19}},type:"if",locations:[{start:{line:139,column:4},end:{line:140,column:19}},{start:{line:139,column:4},end:{line:140,column:19}}],line:139}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},b:{"0":[0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1ed07fc80b1d68001ca2f5c5e43947e5e369719b"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_1huth90sfx=function(){return actualCoverage;};return actualCoverage;}cov_1huth90sfx();class RoomManager{constructor(request_handler,size=(cov_1huth90sfx().b[0][0]++,30000)){cov_1huth90sfx().f[0]++;cov_1huth90sfx().s[0]++;this.USER_TO_ROOM={};cov_1huth90sfx().s[1]++;this.ROOMS_STATE={};cov_1huth90sfx().s[2]++;this.REQUEST_HANDLER=request_handler;cov_1huth90sfx().s[3]++;this.max_size=size;//for random generator
cov_1huth90sfx().s[4]++;this.CHAR='abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ';}authenticate_user(user_id){cov_1huth90sfx().f[1]++;cov_1huth90sfx().s[5]++;//public
if(!this.is_user_exist(user_id)){cov_1huth90sfx().b[1][0]++;cov_1huth90sfx().s[6]++;return{success:false,msg:"Failed to authenticate the user"};}else{cov_1huth90sfx().b[1][1]++;}cov_1huth90sfx().s[7]++;return{success:true,msg:"Success!"};}join_room(user_id,room_id){cov_1huth90sfx().f[2]++;//public
var auth_result=(cov_1huth90sfx().s[8]++,this.authenticate_user(user_id));cov_1huth90sfx().s[9]++;if(!auth_result.success){cov_1huth90sfx().b[2][0]++;cov_1huth90sfx().s[10]++;return auth_result;}else{cov_1huth90sfx().b[2][1]++;}cov_1huth90sfx().s[11]++;console.log(room_id,user_id,this.USER_TO_ROOM);cov_1huth90sfx().s[12]++;if((cov_1huth90sfx().b[4][0]++,this.USER_TO_ROOM[user_id]!=null)&&(cov_1huth90sfx().b[4][1]++,this.USER_TO_ROOM[user_id].room_number!=room_id)){cov_1huth90sfx().b[3][0]++;cov_1huth90sfx().s[13]++;return{success:false,msg:"You have already join a different room"};}else{cov_1huth90sfx().b[3][1]++;}cov_1huth90sfx().s[14]++;if(!this.valid_room_to_join(user_id,room_id)){cov_1huth90sfx().b[5][0]++;cov_1huth90sfx().s[15]++;return{success:false,msg:"The room is full or does not exist! Please try a different room ID"};}else{cov_1huth90sfx().b[5][1]++;}var room=(cov_1huth90sfx().s[16]++,this.get_room(room_id));cov_1huth90sfx().s[17]++;if((cov_1huth90sfx().b[7][0]++,room.p1!=user_id)&&(cov_1huth90sfx().b[7][1]++,room.p2!=user_id)){cov_1huth90sfx().b[6][0]++;cov_1huth90sfx().s[18]++;if(room.p1==null){cov_1huth90sfx().b[8][0]++;cov_1huth90sfx().s[19]++;room.p1=user_id;}else{cov_1huth90sfx().b[8][1]++;cov_1huth90sfx().s[20]++;room.p2=user_id;}}else{cov_1huth90sfx().b[6][1]++;}cov_1huth90sfx().s[21]++;this.USER_TO_ROOM[user_id]=room_id;var msg=(cov_1huth90sfx().s[22]++,"Success to join!");cov_1huth90sfx().s[23]++;if(this.is_full(room_id)){cov_1huth90sfx().b[9][0]++;cov_1huth90sfx().s[24]++;room.pause=false;cov_1huth90sfx().s[25]++;msg="Ready to start the game!";}else{cov_1huth90sfx().b[9][1]++;}cov_1huth90sfx().s[26]++;return{success:true,msg:msg};}create_room(user_id){cov_1huth90sfx().f[3]++;//public
var auth_result=(cov_1huth90sfx().s[27]++,this.authenticate_user(user_id));cov_1huth90sfx().s[28]++;if(!auth_result.success){cov_1huth90sfx().b[10][0]++;cov_1huth90sfx().s[29]++;return auth_result;}else{cov_1huth90sfx().b[10][1]++;}cov_1huth90sfx().s[30]++;if(this.ROOMS_STATE.length==this.max_size){cov_1huth90sfx().b[11][0]++;cov_1huth90sfx().s[31]++;return{success:false,msg:"We have filled all rooms! Please try again later!"};}else{cov_1huth90sfx().b[11][1]++;}cov_1huth90sfx().s[32]++;if(this.USER_TO_ROOM[user_id]!=null){cov_1huth90sfx().b[12][0]++;cov_1huth90sfx().s[33]++;return{success:false,msg:"You have already join a room"};}else{cov_1huth90sfx().b[12][1]++;}var new_id=(cov_1huth90sfx().s[34]++,this.get_new_room_id());var new_game=(cov_1huth90sfx().s[35]++,this.REQUEST_HANDLER.new_chess_game());cov_1huth90sfx().s[36]++;this.ROOMS_STATE[new_id]={room_number:new_id,p1:user_id,p2:null,chess:new_game,pause:true};cov_1huth90sfx().s[37]++;this.USER_TO_ROOM[user_id]=new_id;cov_1huth90sfx().s[38]++;return{success:true,msg:"Success!"};}create_new_user(){cov_1huth90sfx().f[4]++;//public
var user_id=(cov_1huth90sfx().s[39]++,this.get_new_user_id());cov_1huth90sfx().s[40]++;this.USER_TO_ROOM[user_id]=null;cov_1huth90sfx().s[41]++;return user_id;}is_user_exist(user_id){cov_1huth90sfx().f[5]++;cov_1huth90sfx().s[42]++;if(user_id==null){cov_1huth90sfx().b[13][0]++;cov_1huth90sfx().s[43]++;return false;}else{cov_1huth90sfx().b[13][1]++;}cov_1huth90sfx().s[44]++;return user_id in this.USER_TO_ROOM;}get_user_room(user_id){cov_1huth90sfx().f[6]++;cov_1huth90sfx().s[45]++;//public
if(!this.is_user_exist(user_id)){cov_1huth90sfx().b[14][0]++;cov_1huth90sfx().s[46]++;return null;}else{cov_1huth90sfx().b[14][1]++;}var room_id=(cov_1huth90sfx().s[47]++,this.USER_TO_ROOM[user_id]);cov_1huth90sfx().s[48]++;return this.get_room(room_id);}is_room_exist(room_id){cov_1huth90sfx().f[7]++;cov_1huth90sfx().s[49]++;if(room_id==null){cov_1huth90sfx().b[15][0]++;cov_1huth90sfx().s[50]++;return false;}else{cov_1huth90sfx().b[15][1]++;}cov_1huth90sfx().s[51]++;return room_id in this.ROOMS_STATE;}get_room(room_id){cov_1huth90sfx().f[8]++;cov_1huth90sfx().s[52]++;if(!this.is_room_exist(room_id)){cov_1huth90sfx().b[16][0]++;cov_1huth90sfx().s[53]++;return null;}else{cov_1huth90sfx().b[16][1]++;}cov_1huth90sfx().s[54]++;return this.ROOMS_STATE[room_id];}is_full(room_id){cov_1huth90sfx().f[9]++;cov_1huth90sfx().s[55]++;//private, should only be use by Room Manager
if(!this.is_room_exist(room_id)){cov_1huth90sfx().b[17][0]++;cov_1huth90sfx().s[56]++;//should not enter here
return false;}else{cov_1huth90sfx().b[17][1]++;}var room=(cov_1huth90sfx().s[57]++,this.get_room(room_id));cov_1huth90sfx().s[58]++;if((cov_1huth90sfx().b[19][0]++,room.p1!=null)&&(cov_1huth90sfx().b[19][1]++,room.p2!=null)){cov_1huth90sfx().b[18][0]++;cov_1huth90sfx().s[59]++;return true;}else{cov_1huth90sfx().b[18][1]++;}cov_1huth90sfx().s[60]++;return false;}valid_room_to_join(user_id,room_id){cov_1huth90sfx().f[10]++;cov_1huth90sfx().s[61]++;if(!this.is_room_exist(room_id)){cov_1huth90sfx().b[20][0]++;cov_1huth90sfx().s[62]++;return false;}else{cov_1huth90sfx().b[20][1]++;}var room=(cov_1huth90sfx().s[63]++,this.get_room(room_id));cov_1huth90sfx().s[64]++;if((cov_1huth90sfx().b[22][0]++,room.p1==user_id)||(cov_1huth90sfx().b[22][1]++,room.p2==user_id)){cov_1huth90sfx().b[21][0]++;cov_1huth90sfx().s[65]++;return true;}else{cov_1huth90sfx().b[21][1]++;}cov_1huth90sfx().s[66]++;if(this.is_full(room_id)){cov_1huth90sfx().b[23][0]++;cov_1huth90sfx().s[67]++;return false;}else{cov_1huth90sfx().b[23][1]++;}cov_1huth90sfx().s[68]++;return true;}get_new_user_id(){cov_1huth90sfx().f[11]++;var new_id=(cov_1huth90sfx().s[69]++,this.generate_random_id());cov_1huth90sfx().s[70]++;while(this.is_user_exist(new_id)){cov_1huth90sfx().s[71]++;new_id=this.generate_random_id();}cov_1huth90sfx().s[72]++;return new_id;}get_new_room_id(){cov_1huth90sfx().f[12]++;var new_id=(cov_1huth90sfx().s[73]++,this.generate_random_id());cov_1huth90sfx().s[74]++;while(this.is_room_exist(new_id)){cov_1huth90sfx().s[75]++;new_id=this.generate_random_id();}cov_1huth90sfx().s[76]++;return new_id;}generate_random_id(){cov_1huth90sfx().f[13]++;//might need a new class in the future
var length=(cov_1huth90sfx().s[77]++,Math.floor(Math.random()*3)+5);var id=(cov_1huth90sfx().s[78]++,[]);cov_1huth90sfx().s[79]++;for(var i=(cov_1huth90sfx().s[80]++,0);i<length;i++){cov_1huth90sfx().s[81]++;id.push(this.CHAR[Math.floor(Math.random()*this.CHAR.length)]);}cov_1huth90sfx().s[82]++;return id.join('');}}cov_1huth90sfx().s[83]++;module.exports=RoomManager;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJvb21NYW5hZ2VyLmpzIl0sIm5hbWVzIjpbIlJvb21NYW5hZ2VyIiwiY29uc3RydWN0b3IiLCJyZXF1ZXN0X2hhbmRsZXIiLCJzaXplIiwiVVNFUl9UT19ST09NIiwiUk9PTVNfU1RBVEUiLCJSRVFVRVNUX0hBTkRMRVIiLCJtYXhfc2l6ZSIsIkNIQVIiLCJhdXRoZW50aWNhdGVfdXNlciIsInVzZXJfaWQiLCJpc191c2VyX2V4aXN0Iiwic3VjY2VzcyIsIm1zZyIsImpvaW5fcm9vbSIsInJvb21faWQiLCJhdXRoX3Jlc3VsdCIsImNvbnNvbGUiLCJsb2ciLCJyb29tX251bWJlciIsInZhbGlkX3Jvb21fdG9fam9pbiIsInJvb20iLCJnZXRfcm9vbSIsInAxIiwicDIiLCJpc19mdWxsIiwicGF1c2UiLCJjcmVhdGVfcm9vbSIsImxlbmd0aCIsIm5ld19pZCIsImdldF9uZXdfcm9vbV9pZCIsIm5ld19nYW1lIiwibmV3X2NoZXNzX2dhbWUiLCJjaGVzcyIsImNyZWF0ZV9uZXdfdXNlciIsImdldF9uZXdfdXNlcl9pZCIsImdldF91c2VyX3Jvb20iLCJpc19yb29tX2V4aXN0IiwiZ2VuZXJhdGVfcmFuZG9tX2lkIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiaWQiLCJpIiwicHVzaCIsImpvaW4iLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiaTNaQUNBLEtBQU1BLENBQUFBLFdBQVcsQ0FDZkMsV0FBVyxDQUFDQyxlQUFELENBQWtCQyxJQUFJLDZCQUFDLEtBQUQsQ0FBdEIsQ0FBNkIsaURBQ3RDLEtBQUtDLFlBQUwsQ0FBb0IsRUFBcEIsQ0FEc0Msd0JBRXRDLEtBQUtDLFdBQUwsQ0FBbUIsRUFBbkIsQ0FGc0Msd0JBR3RDLEtBQUtDLGVBQUwsQ0FBdUJKLGVBQXZCLENBSHNDLHdCQUl0QyxLQUFLSyxRQUFMLENBQWdCSixJQUFoQixDQUNBO0FBTHNDLHdCQU10QyxLQUFLSyxJQUFMLENBQVksZ0VBQVosQ0FFRCxDQUNEQyxpQkFBaUIsQ0FBQ0MsT0FBRCxDQUFTLGlEQUFFO0FBQzFCLEdBQUcsQ0FBQyxLQUFLQyxhQUFMLENBQW1CRCxPQUFuQixDQUFKLENBQ0UsMERBQU8sQ0FDTEUsT0FBTyxDQUFFLEtBREosQ0FFTEMsR0FBRyxDQUFFLGlDQUZBLENBQVAsQ0FHRSxDQUpKLGlDQUR3Qix3QkFNeEIsTUFBTyxDQUNMRCxPQUFPLENBQUUsSUFESixDQUVMQyxHQUFHLENBQUUsVUFGQSxDQUFQLENBSUQsQ0FDREMsU0FBUyxDQUFDSixPQUFELENBQVVLLE9BQVYsQ0FBa0IseUJBQUU7QUFDM0IsR0FBSUMsQ0FBQUEsV0FBVywwQkFBRyxLQUFLUCxpQkFBTCxDQUF1QkMsT0FBdkIsQ0FBSCxDQUFmLENBRHlCLHdCQUV6QixHQUFHLENBQUNNLFdBQVcsQ0FBQ0osT0FBaEIsQ0FDRSwyREFBT0ksQ0FBQUEsV0FBUCxDQUFtQixDQURyQixpQ0FGeUIseUJBSXpCQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUgsT0FBWixDQUFxQkwsT0FBckIsQ0FBOEIsS0FBS04sWUFBbkMsRUFKeUIseUJBS3pCLEdBQUcsaUNBQUtBLFlBQUwsQ0FBa0JNLE9BQWxCLEdBQThCLElBQTlCLCtCQUFzQyxLQUFLTixZQUFMLENBQWtCTSxPQUFsQixFQUEyQlMsV0FBM0IsRUFBMENKLE9BQWhGLENBQUgsQ0FBMkYscURBQ3pGLE1BQU0sQ0FDSkgsT0FBTyxDQUFFLEtBREwsQ0FFSkMsR0FBRyxDQUFFLHdDQUZELENBQU4sQ0FJRCxDQUxELGlDQUx5Qix5QkFXekIsR0FBRyxDQUFDLEtBQUtPLGtCQUFMLENBQXdCVixPQUF4QixDQUFpQ0ssT0FBakMsQ0FBSixDQUNFLDJEQUFPLENBQ0xILE9BQU8sQ0FBQyxLQURILENBRUxDLEdBQUcsQ0FBRSxvRUFGQSxDQUFQLENBR0UsQ0FKSixpQ0FNQSxHQUFJUSxDQUFBQSxJQUFJLDJCQUFHLEtBQUtDLFFBQUwsQ0FBY1AsT0FBZCxDQUFILENBQVIsQ0FqQnlCLHlCQW1CekIsR0FBRyw0QkFBQU0sSUFBSSxDQUFDRSxFQUFMLEVBQVdiLE9BQVgsK0JBQXNCVyxJQUFJLENBQUNHLEVBQUwsRUFBV2QsT0FBakMsQ0FBSCxDQUE0QyxxREFDMUMsR0FBR1csSUFBSSxDQUFDRSxFQUFMLEVBQVcsSUFBZCxDQUNFLHFEQUFBRixJQUFJLENBQUNFLEVBQUwsQ0FBVWIsT0FBVixDQUFrQixDQURwQixJQUdFLHFEQUFBVyxJQUFJLENBQUNHLEVBQUwsQ0FBVWQsT0FBVixDQUFrQixDQUNyQixDQUxELGlDQW5CeUIseUJBeUJ6QixLQUFLTixZQUFMLENBQWtCTSxPQUFsQixFQUE2QkssT0FBN0IsQ0FDQSxHQUFJRixDQUFBQSxHQUFHLDJCQUFHLGtCQUFILENBQVAsQ0ExQnlCLHlCQTJCekIsR0FBRyxLQUFLWSxPQUFMLENBQWFWLE9BQWIsQ0FBSCxDQUF5QixxREFDdkJNLElBQUksQ0FBQ0ssS0FBTCxDQUFhLEtBQWIsQ0FEdUIseUJBRXZCYixHQUFHLENBQUcsMEJBQU4sQ0FDRCxDQUhELGlDQTNCeUIseUJBK0J6QixNQUFPLENBQ0xELE9BQU8sQ0FBRSxJQURKLENBRUxDLEdBQUcsQ0FBRUEsR0FGQSxDQUFQLENBSUQsQ0FDRGMsV0FBVyxDQUFDakIsT0FBRCxDQUFTLHlCQUFFO0FBQ3BCLEdBQUlNLENBQUFBLFdBQVcsMkJBQUcsS0FBS1AsaUJBQUwsQ0FBdUJDLE9BQXZCLENBQUgsQ0FBZixDQURrQix5QkFFbEIsR0FBRyxDQUFDTSxXQUFXLENBQUNKLE9BQWhCLENBQ0UsNERBQU9JLENBQUFBLFdBQVAsQ0FBbUIsQ0FEckIsa0NBRmtCLHlCQUtsQixHQUFHLEtBQUtYLFdBQUwsQ0FBaUJ1QixNQUFqQixFQUEyQixLQUFLckIsUUFBbkMsQ0FDRSw0REFBTyxDQUNMSyxPQUFPLENBQUUsS0FESixDQUVMQyxHQUFHLENBQUUsbURBRkEsQ0FBUCxDQUdFLENBSkosa0NBTGtCLHlCQVdsQixHQUFHLEtBQUtULFlBQUwsQ0FBa0JNLE9BQWxCLEdBQThCLElBQWpDLENBQXNDLHNEQUNwQyxNQUFNLENBQ0pFLE9BQU8sQ0FBRSxLQURMLENBRUpDLEdBQUcsQ0FBRSw4QkFGRCxDQUFOLENBSUQsQ0FMRCxrQ0FNQSxHQUFJZ0IsQ0FBQUEsTUFBTSwyQkFBRyxLQUFLQyxlQUFMLEVBQUgsQ0FBVixDQUVBLEdBQUlDLENBQUFBLFFBQVEsMkJBQUcsS0FBS3pCLGVBQUwsQ0FBcUIwQixjQUFyQixFQUFILENBQVosQ0FuQmtCLHlCQW9CaEIsS0FBSzNCLFdBQUwsQ0FBaUJ3QixNQUFqQixFQUEyQixDQUN6QlYsV0FBVyxDQUFFVSxNQURZLENBRXpCTixFQUFFLENBQUViLE9BRnFCLENBR3pCYyxFQUFFLENBQUUsSUFIcUIsQ0FJekJTLEtBQUssQ0FBRUYsUUFKa0IsQ0FLekJMLEtBQUssQ0FBRSxJQUxrQixDQUEzQixDQXBCZ0IseUJBNEJoQixLQUFLdEIsWUFBTCxDQUFrQk0sT0FBbEIsRUFBNkJtQixNQUE3QixDQTVCZ0IseUJBOEJoQixNQUFPLENBQ0xqQixPQUFPLENBQUUsSUFESixDQUVMQyxHQUFHLENBQUUsVUFGQSxDQUFQLENBSUgsQ0FDRHFCLGVBQWUsRUFBRSx5QkFBRTtBQUNqQixHQUFJeEIsQ0FBQUEsT0FBTywyQkFBRyxLQUFLeUIsZUFBTCxFQUFILENBQVgsQ0FEZSx5QkFFZixLQUFLL0IsWUFBTCxDQUFrQk0sT0FBbEIsRUFBNkIsSUFBN0IsQ0FGZSx5QkFHZixNQUFPQSxDQUFBQSxPQUFQLENBQ0QsQ0FDREMsYUFBYSxDQUFDRCxPQUFELENBQVMsa0RBQ3BCLEdBQUdBLE9BQU8sRUFBSSxJQUFkLENBQ0UsNERBQU8sTUFBUCxDQUFhLENBRGYsa0NBRG9CLHlCQUdwQixNQUFRQSxDQUFBQSxPQUFPLEdBQUksTUFBS04sWUFBeEIsQ0FDRCxDQUNEZ0MsYUFBYSxDQUFDMUIsT0FBRCxDQUFTLGtEQUFFO0FBQ3RCLEdBQUcsQ0FBQyxLQUFLQyxhQUFMLENBQW1CRCxPQUFuQixDQUFKLENBQ0UsNERBQU8sS0FBUCxDQUFZLENBRGQsa0NBRUEsR0FBSUssQ0FBQUEsT0FBTywyQkFBRyxLQUFLWCxZQUFMLENBQWtCTSxPQUFsQixDQUFILENBQVgsQ0FIb0IseUJBS3BCLE1BQU8sTUFBS1ksUUFBTCxDQUFjUCxPQUFkLENBQVAsQ0FDRCxDQUNEc0IsYUFBYSxDQUFDdEIsT0FBRCxDQUFTLGtEQUNwQixHQUFHQSxPQUFPLEVBQUksSUFBZCxDQUNFLDREQUFPLE1BQVAsQ0FBYSxDQURmLGtDQURvQix5QkFHcEIsTUFBUUEsQ0FBQUEsT0FBTyxHQUFJLE1BQUtWLFdBQXhCLENBQ0QsQ0FDRGlCLFFBQVEsQ0FBQ1AsT0FBRCxDQUFTLGtEQUNmLEdBQUcsQ0FBQyxLQUFLc0IsYUFBTCxDQUFtQnRCLE9BQW5CLENBQUosQ0FDRSw0REFBTyxLQUFQLENBQVksQ0FEZCxrQ0FEZSx5QkFHZixNQUFPLE1BQUtWLFdBQUwsQ0FBaUJVLE9BQWpCLENBQVAsQ0FDRCxDQUVEVSxPQUFPLENBQUNWLE9BQUQsQ0FBUyxrREFBRTtBQUNoQixHQUFHLENBQUMsS0FBS3NCLGFBQUwsQ0FBbUJ0QixPQUFuQixDQUFKLENBQ0Usc0RBRCtCO0FBQy9CLE1BQU8sTUFBUCxDQUFhLENBRGYsa0NBR0EsR0FBSU0sQ0FBQUEsSUFBSSwyQkFBRyxLQUFLQyxRQUFMLENBQWNQLE9BQWQsQ0FBSCxDQUFSLENBSmMseUJBS2QsR0FBRyw2QkFBQU0sSUFBSSxDQUFDRSxFQUFMLEVBQVcsSUFBWCxnQ0FBbUJGLElBQUksQ0FBQ0csRUFBTCxFQUFXLElBQTlCLENBQUgsQ0FDRSw0REFBTyxLQUFQLENBQVksQ0FEZCxrQ0FMYyx5QkFPZCxNQUFPLE1BQVAsQ0FDRCxDQUNESixrQkFBa0IsQ0FBQ1YsT0FBRCxDQUFVSyxPQUFWLENBQWtCLG1EQUNsQyxHQUFHLENBQUMsS0FBS3NCLGFBQUwsQ0FBbUJ0QixPQUFuQixDQUFKLENBQ0UsNERBQU8sTUFBUCxDQUFhLENBRGYsa0NBR0EsR0FBSU0sQ0FBQUEsSUFBSSwyQkFBRyxLQUFLQyxRQUFMLENBQWNQLE9BQWQsQ0FBSCxDQUFSLENBSmtDLHlCQUtsQyxHQUFHLDZCQUFBTSxJQUFJLENBQUNFLEVBQUwsRUFBV2IsT0FBWCxnQ0FBc0JXLElBQUksQ0FBQ0csRUFBTCxFQUFXZCxPQUFqQyxDQUFILENBQ0UsNERBQU8sS0FBUCxDQUFZLENBRGQsa0NBTGtDLHlCQVFsQyxHQUFHLEtBQUtlLE9BQUwsQ0FBYVYsT0FBYixDQUFILENBQ0UsNERBQU8sTUFBUCxDQUFhLENBRGYsa0NBUmtDLHlCQVVsQyxNQUFPLEtBQVAsQ0FDRCxDQUNEb0IsZUFBZSxFQUFFLDBCQUNmLEdBQUlOLENBQUFBLE1BQU0sMkJBQUcsS0FBS1Msa0JBQUwsRUFBSCxDQUFWLENBRGUseUJBRWYsTUFBTSxLQUFLM0IsYUFBTCxDQUFtQmtCLE1BQW5CLENBQU4sQ0FBaUMsMEJBQy9CQSxNQUFNLENBQUcsS0FBS1Msa0JBQUwsRUFBVCxDQUNELENBSmMseUJBS2YsTUFBT1QsQ0FBQUEsTUFBUCxDQUNELENBQ0RDLGVBQWUsRUFBRSwwQkFDZixHQUFJRCxDQUFBQSxNQUFNLDJCQUFHLEtBQUtTLGtCQUFMLEVBQUgsQ0FBVixDQURlLHlCQUVmLE1BQU0sS0FBS0QsYUFBTCxDQUFtQlIsTUFBbkIsQ0FBTixDQUFpQywwQkFDL0JBLE1BQU0sQ0FBRyxLQUFLUyxrQkFBTCxFQUFULENBQ0QsQ0FKYyx5QkFLZixNQUFPVCxDQUFBQSxNQUFQLENBQ0QsQ0FDRFMsa0JBQWtCLEVBQUUsMEJBQUU7QUFDcEIsR0FBSVYsQ0FBQUEsTUFBTSwyQkFBR1csSUFBSSxDQUFDQyxLQUFMLENBQVdELElBQUksQ0FBQ0UsTUFBTCxHQUFjLENBQXpCLEVBQThCLENBQWpDLENBQVYsQ0FDQSxHQUFJQyxDQUFBQSxFQUFFLDJCQUFHLEVBQUgsQ0FBTixDQUZrQix5QkFHbEIsSUFBSSxHQUFJQyxDQUFBQSxDQUFDLDJCQUFHLENBQUgsQ0FBVCxDQUFlQSxDQUFDLENBQUdmLE1BQW5CLENBQTJCZSxDQUFDLEVBQTVCLENBQStCLDBCQUM3QkQsRUFBRSxDQUFDRSxJQUFILENBQVEsS0FBS3BDLElBQUwsQ0FBVStCLElBQUksQ0FBQ0MsS0FBTCxDQUFXRCxJQUFJLENBQUNFLE1BQUwsR0FBYyxLQUFLakMsSUFBTCxDQUFVb0IsTUFBbkMsQ0FBVixDQUFSLEVBQ0QsQ0FMaUIseUJBTWxCLE1BQU9jLENBQUFBLEVBQUUsQ0FBQ0csSUFBSCxDQUFRLEVBQVIsQ0FBUCxDQUNELENBbEtjLEMseUJBcUtqQkMsTUFBTSxDQUFDQyxPQUFQLENBQWlCL0MsV0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyJcbmNsYXNzIFJvb21NYW5hZ2Vye1xuICBjb25zdHJ1Y3RvcihyZXF1ZXN0X2hhbmRsZXIsIHNpemU9MzAwMDApe1xuICAgIHRoaXMuVVNFUl9UT19ST09NID0ge307XG4gICAgdGhpcy5ST09NU19TVEFURSA9IHt9O1xuICAgIHRoaXMuUkVRVUVTVF9IQU5ETEVSID0gcmVxdWVzdF9oYW5kbGVyO1xuICAgIHRoaXMubWF4X3NpemUgPSBzaXplO1xuICAgIC8vZm9yIHJhbmRvbSBnZW5lcmF0b3JcbiAgICB0aGlzLkNIQVIgPSAnYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVonO1xuXG4gIH1cbiAgYXV0aGVudGljYXRlX3VzZXIodXNlcl9pZCl7IC8vcHVibGljXG4gICAgaWYoIXRoaXMuaXNfdXNlcl9leGlzdCh1c2VyX2lkKSlcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtc2c6IFwiRmFpbGVkIHRvIGF1dGhlbnRpY2F0ZSB0aGUgdXNlclwiXG4gICAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbXNnOiBcIlN1Y2Nlc3MhXCJcbiAgICB9O1xuICB9XG4gIGpvaW5fcm9vbSh1c2VyX2lkLCByb29tX2lkKXsgLy9wdWJsaWNcbiAgICB2YXIgYXV0aF9yZXN1bHQgPSB0aGlzLmF1dGhlbnRpY2F0ZV91c2VyKHVzZXJfaWQpO1xuICAgIGlmKCFhdXRoX3Jlc3VsdC5zdWNjZXNzKVxuICAgICAgcmV0dXJuIGF1dGhfcmVzdWx0O1xuICAgIGNvbnNvbGUubG9nKHJvb21faWQsIHVzZXJfaWQsIHRoaXMuVVNFUl9UT19ST09NKTtcbiAgICBpZih0aGlzLlVTRVJfVE9fUk9PTVt1c2VyX2lkXSAhPSBudWxsICYmIHRoaXMuVVNFUl9UT19ST09NW3VzZXJfaWRdLnJvb21fbnVtYmVyICE9IHJvb21faWQpe1xuICAgICAgcmV0dXJue1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbXNnOiBcIllvdSBoYXZlIGFscmVhZHkgam9pbiBhIGRpZmZlcmVudCByb29tXCJcbiAgICAgIH1cbiAgICB9XG4gICAgaWYoIXRoaXMudmFsaWRfcm9vbV90b19qb2luKHVzZXJfaWQsIHJvb21faWQpKVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczpmYWxzZSxcbiAgICAgICAgbXNnOiBcIlRoZSByb29tIGlzIGZ1bGwgb3IgZG9lcyBub3QgZXhpc3QhIFBsZWFzZSB0cnkgYSBkaWZmZXJlbnQgcm9vbSBJRFwiXG4gICAgICB9O1xuXG4gICAgdmFyIHJvb20gPSB0aGlzLmdldF9yb29tKHJvb21faWQpO1xuXG4gICAgaWYocm9vbS5wMSAhPSB1c2VyX2lkICYmIHJvb20ucDIgIT0gdXNlcl9pZCl7XG4gICAgICBpZihyb29tLnAxID09IG51bGwpXG4gICAgICAgIHJvb20ucDEgPSB1c2VyX2lkO1xuICAgICAgZWxzZVxuICAgICAgICByb29tLnAyID0gdXNlcl9pZDtcbiAgICB9XG4gICAgdGhpcy5VU0VSX1RPX1JPT01bdXNlcl9pZF0gPSByb29tX2lkO1xuICAgIHZhciBtc2cgPSBcIlN1Y2Nlc3MgdG8gam9pbiFcIjtcbiAgICBpZih0aGlzLmlzX2Z1bGwocm9vbV9pZCkpe1xuICAgICAgcm9vbS5wYXVzZSA9IGZhbHNlO1xuICAgICAgbXNnID0gXCJSZWFkeSB0byBzdGFydCB0aGUgZ2FtZSFcIjtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBtc2c6IG1zZ1xuICAgIH07XG4gIH1cbiAgY3JlYXRlX3Jvb20odXNlcl9pZCl7IC8vcHVibGljXG4gICAgdmFyIGF1dGhfcmVzdWx0ID0gdGhpcy5hdXRoZW50aWNhdGVfdXNlcih1c2VyX2lkKTtcbiAgICBpZighYXV0aF9yZXN1bHQuc3VjY2VzcylcbiAgICAgIHJldHVybiBhdXRoX3Jlc3VsdDtcblxuICAgIGlmKHRoaXMuUk9PTVNfU1RBVEUubGVuZ3RoID09IHRoaXMubWF4X3NpemUpXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbXNnOiBcIldlIGhhdmUgZmlsbGVkIGFsbCByb29tcyEgUGxlYXNlIHRyeSBhZ2FpbiBsYXRlciFcIlxuICAgICAgfTtcblxuICAgIGlmKHRoaXMuVVNFUl9UT19ST09NW3VzZXJfaWRdICE9IG51bGwpe1xuICAgICAgcmV0dXJue1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbXNnOiBcIllvdSBoYXZlIGFscmVhZHkgam9pbiBhIHJvb21cIlxuICAgICAgfVxuICAgIH1cbiAgICB2YXIgbmV3X2lkID0gdGhpcy5nZXRfbmV3X3Jvb21faWQoKTtcblxuICAgIHZhciBuZXdfZ2FtZSA9IHRoaXMuUkVRVUVTVF9IQU5ETEVSLm5ld19jaGVzc19nYW1lKCk7XG4gICAgICB0aGlzLlJPT01TX1NUQVRFW25ld19pZF0gPSB7XG4gICAgICAgIHJvb21fbnVtYmVyOiBuZXdfaWQsXG4gICAgICAgIHAxOiB1c2VyX2lkLFxuICAgICAgICBwMjogbnVsbCxcbiAgICAgICAgY2hlc3M6IG5ld19nYW1lLFxuICAgICAgICBwYXVzZTogdHJ1ZVxuICAgICAgfVxuXG4gICAgICB0aGlzLlVTRVJfVE9fUk9PTVt1c2VyX2lkXSA9IG5ld19pZDtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbXNnOiBcIlN1Y2Nlc3MhXCJcbiAgICAgIH07XG4gIH1cbiAgY3JlYXRlX25ld191c2VyKCl7IC8vcHVibGljXG4gICAgdmFyIHVzZXJfaWQgPSB0aGlzLmdldF9uZXdfdXNlcl9pZCgpO1xuICAgIHRoaXMuVVNFUl9UT19ST09NW3VzZXJfaWRdID0gbnVsbDtcbiAgICByZXR1cm4gdXNlcl9pZDtcbiAgfVxuICBpc191c2VyX2V4aXN0KHVzZXJfaWQpe1xuICAgIGlmKHVzZXJfaWQgPT0gbnVsbClcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gKHVzZXJfaWQgaW4gdGhpcy5VU0VSX1RPX1JPT00pO1xuICB9XG4gIGdldF91c2VyX3Jvb20odXNlcl9pZCl7IC8vcHVibGljXG4gICAgaWYoIXRoaXMuaXNfdXNlcl9leGlzdCh1c2VyX2lkKSlcbiAgICAgIHJldHVybiBudWxsO1xuICAgIHZhciByb29tX2lkID0gdGhpcy5VU0VSX1RPX1JPT01bdXNlcl9pZF07XG5cbiAgICByZXR1cm4gdGhpcy5nZXRfcm9vbShyb29tX2lkKTtcbiAgfVxuICBpc19yb29tX2V4aXN0KHJvb21faWQpe1xuICAgIGlmKHJvb21faWQgPT0gbnVsbClcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gKHJvb21faWQgaW4gdGhpcy5ST09NU19TVEFURSlcbiAgfVxuICBnZXRfcm9vbShyb29tX2lkKXtcbiAgICBpZighdGhpcy5pc19yb29tX2V4aXN0KHJvb21faWQpKVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIHRoaXMuUk9PTVNfU1RBVEVbcm9vbV9pZF07XG4gIH1cblxuICBpc19mdWxsKHJvb21faWQpeyAvL3ByaXZhdGUsIHNob3VsZCBvbmx5IGJlIHVzZSBieSBSb29tIE1hbmFnZXJcbiAgICBpZighdGhpcy5pc19yb29tX2V4aXN0KHJvb21faWQpKSAvL3Nob3VsZCBub3QgZW50ZXIgaGVyZVxuICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgdmFyIHJvb20gPSB0aGlzLmdldF9yb29tKHJvb21faWQpO1xuICAgIGlmKHJvb20ucDEgIT0gbnVsbCAmJiByb29tLnAyICE9IG51bGwpXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdmFsaWRfcm9vbV90b19qb2luKHVzZXJfaWQsIHJvb21faWQpe1xuICAgIGlmKCF0aGlzLmlzX3Jvb21fZXhpc3Qocm9vbV9pZCkpXG4gICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICB2YXIgcm9vbSA9IHRoaXMuZ2V0X3Jvb20ocm9vbV9pZCk7XG4gICAgaWYocm9vbS5wMSA9PSB1c2VyX2lkIHx8IHJvb20ucDIgPT0gdXNlcl9pZClcbiAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgaWYodGhpcy5pc19mdWxsKHJvb21faWQpKVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGdldF9uZXdfdXNlcl9pZCgpe1xuICAgIHZhciBuZXdfaWQgPSB0aGlzLmdlbmVyYXRlX3JhbmRvbV9pZCgpO1xuICAgIHdoaWxlKHRoaXMuaXNfdXNlcl9leGlzdChuZXdfaWQpKXtcbiAgICAgIG5ld19pZCA9IHRoaXMuZ2VuZXJhdGVfcmFuZG9tX2lkKCk7XG4gICAgfVxuICAgIHJldHVybiBuZXdfaWQ7XG4gIH1cbiAgZ2V0X25ld19yb29tX2lkKCl7XG4gICAgdmFyIG5ld19pZCA9IHRoaXMuZ2VuZXJhdGVfcmFuZG9tX2lkKCk7XG4gICAgd2hpbGUodGhpcy5pc19yb29tX2V4aXN0KG5ld19pZCkpe1xuICAgICAgbmV3X2lkID0gdGhpcy5nZW5lcmF0ZV9yYW5kb21faWQoKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ld19pZDtcbiAgfVxuICBnZW5lcmF0ZV9yYW5kb21faWQoKXsgLy9taWdodCBuZWVkIGEgbmV3IGNsYXNzIGluIHRoZSBmdXR1cmVcbiAgICB2YXIgbGVuZ3RoID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjMpICsgNTtcbiAgICB2YXIgaWQgPSBbXVxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKyl7XG4gICAgICBpZC5wdXNoKHRoaXMuQ0hBUltNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqdGhpcy5DSEFSLmxlbmd0aCldKTtcbiAgICB9XG4gICAgcmV0dXJuIGlkLmpvaW4oJycpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUm9vbU1hbmFnZXI7XG4iXX0=