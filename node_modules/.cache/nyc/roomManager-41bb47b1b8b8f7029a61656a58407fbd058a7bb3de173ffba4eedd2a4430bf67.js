function cov_1huth90sfx(){var path="/Users/tuanpnm/Class/SE181/realtime_interactive_chess/roomManager.js";var hash="8a381affcb5b7b2e8b01cbf343c62eee39c8dc08";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/tuanpnm/Class/SE181/realtime_interactive_chess/roomManager.js",statementMap:{"0":{start:{line:4,column:4},end:{line:4,column:27}},"1":{start:{line:5,column:4},end:{line:5,column:26}},"2":{start:{line:6,column:4},end:{line:6,column:43}},"3":{start:{line:7,column:4},end:{line:7,column:25}},"4":{start:{line:9,column:4},end:{line:9,column:81}},"5":{start:{line:13,column:4},end:{line:17,column:8}},"6":{start:{line:14,column:6},end:{line:17,column:8}},"7":{start:{line:18,column:4},end:{line:21,column:6}},"8":{start:{line:24,column:22},end:{line:24,column:53}},"9":{start:{line:25,column:4},end:{line:26,column:25}},"10":{start:{line:26,column:6},end:{line:26,column:25}},"11":{start:{line:28,column:4},end:{line:33,column:5}},"12":{start:{line:29,column:6},end:{line:32,column:7}},"13":{start:{line:35,column:4},end:{line:39,column:8}},"14":{start:{line:36,column:6},end:{line:39,column:8}},"15":{start:{line:41,column:15},end:{line:41,column:37}},"16":{start:{line:43,column:4},end:{line:48,column:5}},"17":{start:{line:44,column:6},end:{line:47,column:26}},"18":{start:{line:45,column:8},end:{line:45,column:26}},"19":{start:{line:47,column:8},end:{line:47,column:26}},"20":{start:{line:49,column:4},end:{line:49,column:41}},"21":{start:{line:50,column:14},end:{line:50,column:32}},"22":{start:{line:51,column:4},end:{line:54,column:5}},"23":{start:{line:52,column:6},end:{line:52,column:25}},"24":{start:{line:53,column:6},end:{line:53,column:39}},"25":{start:{line:55,column:4},end:{line:58,column:6}},"26":{start:{line:61,column:22},end:{line:61,column:53}},"27":{start:{line:62,column:4},end:{line:63,column:25}},"28":{start:{line:63,column:6},end:{line:63,column:25}},"29":{start:{line:65,column:4},end:{line:69,column:8}},"30":{start:{line:66,column:6},end:{line:69,column:8}},"31":{start:{line:71,column:4},end:{line:76,column:5}},"32":{start:{line:72,column:6},end:{line:75,column:7}},"33":{start:{line:77,column:17},end:{line:77,column:39}},"34":{start:{line:79,column:19},end:{line:79,column:56}},"35":{start:{line:80,column:6},end:{line:86,column:7}},"36":{start:{line:88,column:6},end:{line:88,column:42}},"37":{start:{line:90,column:6},end:{line:93,column:8}},"38":{start:{line:96,column:18},end:{line:96,column:40}},"39":{start:{line:97,column:4},end:{line:97,column:38}},"40":{start:{line:98,column:4},end:{line:98,column:19}},"41":{start:{line:101,column:4},end:{line:102,column:19}},"42":{start:{line:102,column:6},end:{line:102,column:19}},"43":{start:{line:103,column:4},end:{line:103,column:42}},"44":{start:{line:106,column:4},end:{line:107,column:18}},"45":{start:{line:107,column:6},end:{line:107,column:18}},"46":{start:{line:108,column:18},end:{line:108,column:44}},"47":{start:{line:110,column:4},end:{line:110,column:34}},"48":{start:{line:113,column:4},end:{line:114,column:19}},"49":{start:{line:114,column:6},end:{line:114,column:19}},"50":{start:{line:115,column:4},end:{line:115,column:40}},"51":{start:{line:118,column:4},end:{line:119,column:18}},"52":{start:{line:119,column:6},end:{line:119,column:18}},"53":{start:{line:120,column:4},end:{line:120,column:37}},"54":{start:{line:124,column:4},end:{line:125,column:19}},"55":{start:{line:125,column:6},end:{line:125,column:19}},"56":{start:{line:127,column:15},end:{line:127,column:37}},"57":{start:{line:128,column:4},end:{line:129,column:18}},"58":{start:{line:129,column:6},end:{line:129,column:18}},"59":{start:{line:130,column:4},end:{line:130,column:17}},"60":{start:{line:133,column:4},end:{line:134,column:19}},"61":{start:{line:134,column:6},end:{line:134,column:19}},"62":{start:{line:136,column:15},end:{line:136,column:37}},"63":{start:{line:137,column:4},end:{line:138,column:18}},"64":{start:{line:138,column:6},end:{line:138,column:18}},"65":{start:{line:140,column:4},end:{line:141,column:19}},"66":{start:{line:141,column:6},end:{line:141,column:19}},"67":{start:{line:142,column:4},end:{line:142,column:16}},"68":{start:{line:145,column:17},end:{line:145,column:42}},"69":{start:{line:146,column:4},end:{line:148,column:5}},"70":{start:{line:147,column:6},end:{line:147,column:41}},"71":{start:{line:149,column:4},end:{line:149,column:18}},"72":{start:{line:152,column:17},end:{line:152,column:42}},"73":{start:{line:153,column:4},end:{line:155,column:5}},"74":{start:{line:154,column:6},end:{line:154,column:41}},"75":{start:{line:156,column:4},end:{line:156,column:18}},"76":{start:{line:159,column:17},end:{line:159,column:48}},"77":{start:{line:160,column:13},end:{line:160,column:15}},"78":{start:{line:161,column:4},end:{line:163,column:5}},"79":{start:{line:161,column:16},end:{line:161,column:17}},"80":{start:{line:162,column:6},end:{line:162,column:69}},"81":{start:{line:164,column:4},end:{line:164,column:23}},"82":{start:{line:168,column:0},end:{line:168,column:29}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:3,column:2},end:{line:3,column:3}},loc:{start:{line:3,column:42},end:{line:11,column:3}},line:3},"1":{name:"(anonymous_1)",decl:{start:{line:12,column:2},end:{line:12,column:3}},loc:{start:{line:12,column:28},end:{line:22,column:3}},line:12},"2":{name:"(anonymous_2)",decl:{start:{line:23,column:2},end:{line:23,column:3}},loc:{start:{line:23,column:29},end:{line:59,column:3}},line:23},"3":{name:"(anonymous_3)",decl:{start:{line:60,column:2},end:{line:60,column:3}},loc:{start:{line:60,column:22},end:{line:94,column:3}},line:60},"4":{name:"(anonymous_4)",decl:{start:{line:95,column:2},end:{line:95,column:3}},loc:{start:{line:95,column:19},end:{line:99,column:3}},line:95},"5":{name:"(anonymous_5)",decl:{start:{line:100,column:2},end:{line:100,column:3}},loc:{start:{line:100,column:24},end:{line:104,column:3}},line:100},"6":{name:"(anonymous_6)",decl:{start:{line:105,column:2},end:{line:105,column:3}},loc:{start:{line:105,column:24},end:{line:111,column:3}},line:105},"7":{name:"(anonymous_7)",decl:{start:{line:112,column:2},end:{line:112,column:3}},loc:{start:{line:112,column:24},end:{line:116,column:3}},line:112},"8":{name:"(anonymous_8)",decl:{start:{line:117,column:2},end:{line:117,column:3}},loc:{start:{line:117,column:19},end:{line:121,column:3}},line:117},"9":{name:"(anonymous_9)",decl:{start:{line:123,column:2},end:{line:123,column:3}},loc:{start:{line:123,column:18},end:{line:131,column:3}},line:123},"10":{name:"(anonymous_10)",decl:{start:{line:132,column:2},end:{line:132,column:3}},loc:{start:{line:132,column:38},end:{line:143,column:3}},line:132},"11":{name:"(anonymous_11)",decl:{start:{line:144,column:2},end:{line:144,column:3}},loc:{start:{line:144,column:19},end:{line:150,column:3}},line:144},"12":{name:"(anonymous_12)",decl:{start:{line:151,column:2},end:{line:151,column:3}},loc:{start:{line:151,column:19},end:{line:157,column:3}},line:151},"13":{name:"(anonymous_13)",decl:{start:{line:158,column:2},end:{line:158,column:3}},loc:{start:{line:158,column:22},end:{line:165,column:3}},line:158}},branchMap:{"0":{loc:{start:{line:3,column:31},end:{line:3,column:41}},type:"default-arg",locations:[{start:{line:3,column:36},end:{line:3,column:41}}],line:3},"1":{loc:{start:{line:13,column:4},end:{line:17,column:8}},type:"if",locations:[{start:{line:13,column:4},end:{line:17,column:8}},{start:{line:13,column:4},end:{line:17,column:8}}],line:13},"2":{loc:{start:{line:25,column:4},end:{line:26,column:25}},type:"if",locations:[{start:{line:25,column:4},end:{line:26,column:25}},{start:{line:25,column:4},end:{line:26,column:25}}],line:25},"3":{loc:{start:{line:28,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:28,column:4},end:{line:33,column:5}},{start:{line:28,column:4},end:{line:33,column:5}}],line:28},"4":{loc:{start:{line:35,column:4},end:{line:39,column:8}},type:"if",locations:[{start:{line:35,column:4},end:{line:39,column:8}},{start:{line:35,column:4},end:{line:39,column:8}}],line:35},"5":{loc:{start:{line:43,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:43,column:4},end:{line:48,column:5}},{start:{line:43,column:4},end:{line:48,column:5}}],line:43},"6":{loc:{start:{line:43,column:7},end:{line:43,column:47}},type:"binary-expr",locations:[{start:{line:43,column:7},end:{line:43,column:25}},{start:{line:43,column:29},end:{line:43,column:47}}],line:43},"7":{loc:{start:{line:44,column:6},end:{line:47,column:26}},type:"if",locations:[{start:{line:44,column:6},end:{line:47,column:26}},{start:{line:44,column:6},end:{line:47,column:26}}],line:44},"8":{loc:{start:{line:51,column:4},end:{line:54,column:5}},type:"if",locations:[{start:{line:51,column:4},end:{line:54,column:5}},{start:{line:51,column:4},end:{line:54,column:5}}],line:51},"9":{loc:{start:{line:62,column:4},end:{line:63,column:25}},type:"if",locations:[{start:{line:62,column:4},end:{line:63,column:25}},{start:{line:62,column:4},end:{line:63,column:25}}],line:62},"10":{loc:{start:{line:65,column:4},end:{line:69,column:8}},type:"if",locations:[{start:{line:65,column:4},end:{line:69,column:8}},{start:{line:65,column:4},end:{line:69,column:8}}],line:65},"11":{loc:{start:{line:71,column:4},end:{line:76,column:5}},type:"if",locations:[{start:{line:71,column:4},end:{line:76,column:5}},{start:{line:71,column:4},end:{line:76,column:5}}],line:71},"12":{loc:{start:{line:101,column:4},end:{line:102,column:19}},type:"if",locations:[{start:{line:101,column:4},end:{line:102,column:19}},{start:{line:101,column:4},end:{line:102,column:19}}],line:101},"13":{loc:{start:{line:106,column:4},end:{line:107,column:18}},type:"if",locations:[{start:{line:106,column:4},end:{line:107,column:18}},{start:{line:106,column:4},end:{line:107,column:18}}],line:106},"14":{loc:{start:{line:113,column:4},end:{line:114,column:19}},type:"if",locations:[{start:{line:113,column:4},end:{line:114,column:19}},{start:{line:113,column:4},end:{line:114,column:19}}],line:113},"15":{loc:{start:{line:118,column:4},end:{line:119,column:18}},type:"if",locations:[{start:{line:118,column:4},end:{line:119,column:18}},{start:{line:118,column:4},end:{line:119,column:18}}],line:118},"16":{loc:{start:{line:124,column:4},end:{line:125,column:19}},type:"if",locations:[{start:{line:124,column:4},end:{line:125,column:19}},{start:{line:124,column:4},end:{line:125,column:19}}],line:124},"17":{loc:{start:{line:128,column:4},end:{line:129,column:18}},type:"if",locations:[{start:{line:128,column:4},end:{line:129,column:18}},{start:{line:128,column:4},end:{line:129,column:18}}],line:128},"18":{loc:{start:{line:128,column:7},end:{line:128,column:41}},type:"binary-expr",locations:[{start:{line:128,column:7},end:{line:128,column:22}},{start:{line:128,column:26},end:{line:128,column:41}}],line:128},"19":{loc:{start:{line:133,column:4},end:{line:134,column:19}},type:"if",locations:[{start:{line:133,column:4},end:{line:134,column:19}},{start:{line:133,column:4},end:{line:134,column:19}}],line:133},"20":{loc:{start:{line:137,column:4},end:{line:138,column:18}},type:"if",locations:[{start:{line:137,column:4},end:{line:138,column:18}},{start:{line:137,column:4},end:{line:138,column:18}}],line:137},"21":{loc:{start:{line:137,column:7},end:{line:137,column:47}},type:"binary-expr",locations:[{start:{line:137,column:7},end:{line:137,column:25}},{start:{line:137,column:29},end:{line:137,column:47}}],line:137},"22":{loc:{start:{line:140,column:4},end:{line:141,column:19}},type:"if",locations:[{start:{line:140,column:4},end:{line:141,column:19}},{start:{line:140,column:4},end:{line:141,column:19}}],line:140}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},b:{"0":[0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8a381affcb5b7b2e8b01cbf343c62eee39c8dc08"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_1huth90sfx=function(){return actualCoverage;};return actualCoverage;}cov_1huth90sfx();class RoomManager{constructor(request_handler,size=(cov_1huth90sfx().b[0][0]++,30000)){cov_1huth90sfx().f[0]++;cov_1huth90sfx().s[0]++;this.USER_TO_ROOM={};cov_1huth90sfx().s[1]++;this.ROOMS_STATE={};cov_1huth90sfx().s[2]++;this.REQUEST_HANDLER=request_handler;cov_1huth90sfx().s[3]++;this.max_size=size;//for random generator
cov_1huth90sfx().s[4]++;this.CHAR='abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ';}authenticate_user(user_id){cov_1huth90sfx().f[1]++;cov_1huth90sfx().s[5]++;//public
if(!this.is_user_exist(user_id)){cov_1huth90sfx().b[1][0]++;cov_1huth90sfx().s[6]++;return{success:false,msg:"Failed to authenticate the user"};}else{cov_1huth90sfx().b[1][1]++;}cov_1huth90sfx().s[7]++;return{success:true,msg:"Success!"};}join_room(user_id,room_id){cov_1huth90sfx().f[2]++;//public
var auth_result=(cov_1huth90sfx().s[8]++,this.authenticate_user(user_id));cov_1huth90sfx().s[9]++;if(!auth_result.success){cov_1huth90sfx().b[2][0]++;cov_1huth90sfx().s[10]++;return auth_result;}else{cov_1huth90sfx().b[2][1]++;}cov_1huth90sfx().s[11]++;if(this.USER_TO_ROOM[user_id]!=null){cov_1huth90sfx().b[3][0]++;cov_1huth90sfx().s[12]++;return{success:false,msg:"You have already join a room"};}else{cov_1huth90sfx().b[3][1]++;}cov_1huth90sfx().s[13]++;if(!this.valid_room_to_join(user_id,room_id)){cov_1huth90sfx().b[4][0]++;cov_1huth90sfx().s[14]++;return{success:false,msg:"The room is full or does not exist! Please try a different room ID"};}else{cov_1huth90sfx().b[4][1]++;}var room=(cov_1huth90sfx().s[15]++,this.get_room(room_id));cov_1huth90sfx().s[16]++;if((cov_1huth90sfx().b[6][0]++,room.p1!=user_id)&&(cov_1huth90sfx().b[6][1]++,room.p2!=user_id)){cov_1huth90sfx().b[5][0]++;cov_1huth90sfx().s[17]++;if(room.p1==null){cov_1huth90sfx().b[7][0]++;cov_1huth90sfx().s[18]++;room.p1=user_id;}else{cov_1huth90sfx().b[7][1]++;cov_1huth90sfx().s[19]++;room.p2=user_id;}}else{cov_1huth90sfx().b[5][1]++;}cov_1huth90sfx().s[20]++;this.USER_TO_ROOM[user_id]=room_id;var msg=(cov_1huth90sfx().s[21]++,"Success to join!");cov_1huth90sfx().s[22]++;if(this.is_full(room_id)){cov_1huth90sfx().b[8][0]++;cov_1huth90sfx().s[23]++;room.pause=false;cov_1huth90sfx().s[24]++;msg="Ready to start the game!";}else{cov_1huth90sfx().b[8][1]++;}cov_1huth90sfx().s[25]++;return{success:true,msg:msg};}create_room(user_id){cov_1huth90sfx().f[3]++;//public
var auth_result=(cov_1huth90sfx().s[26]++,this.authenticate_user(user_id));cov_1huth90sfx().s[27]++;if(!auth_result.success){cov_1huth90sfx().b[9][0]++;cov_1huth90sfx().s[28]++;return auth_result;}else{cov_1huth90sfx().b[9][1]++;}cov_1huth90sfx().s[29]++;if(this.ROOMS_STATE.length==this.max_size){cov_1huth90sfx().b[10][0]++;cov_1huth90sfx().s[30]++;return{success:false,msg:"We have filled all rooms! Please try again later!"};}else{cov_1huth90sfx().b[10][1]++;}cov_1huth90sfx().s[31]++;if(this.USER_TO_ROOM[user_id]!=null){cov_1huth90sfx().b[11][0]++;cov_1huth90sfx().s[32]++;return{success:false,msg:"You have already join a room"};}else{cov_1huth90sfx().b[11][1]++;}var new_id=(cov_1huth90sfx().s[33]++,this.get_new_room_id());var new_game=(cov_1huth90sfx().s[34]++,this.REQUEST_HANDLER.new_chess_game());cov_1huth90sfx().s[35]++;this.ROOMS_STATE[new_id]={room_number:new_id,p1:user_id,p2:null,chess:new_game,pause:true};cov_1huth90sfx().s[36]++;this.USER_TO_ROOM[user_id]=new_id;cov_1huth90sfx().s[37]++;return{success:true,msg:"Success!"};}create_new_user(){cov_1huth90sfx().f[4]++;//public
var user_id=(cov_1huth90sfx().s[38]++,this.get_new_user_id());cov_1huth90sfx().s[39]++;this.USER_TO_ROOM[user_id]=null;cov_1huth90sfx().s[40]++;return user_id;}is_user_exist(user_id){cov_1huth90sfx().f[5]++;cov_1huth90sfx().s[41]++;if(user_id==null){cov_1huth90sfx().b[12][0]++;cov_1huth90sfx().s[42]++;return false;}else{cov_1huth90sfx().b[12][1]++;}cov_1huth90sfx().s[43]++;return user_id in this.USER_TO_ROOM;}get_user_room(user_id){cov_1huth90sfx().f[6]++;cov_1huth90sfx().s[44]++;//public
if(!this.is_user_exist(user_id)){cov_1huth90sfx().b[13][0]++;cov_1huth90sfx().s[45]++;return null;}else{cov_1huth90sfx().b[13][1]++;}var room_id=(cov_1huth90sfx().s[46]++,this.USER_TO_ROOM[user_id]);cov_1huth90sfx().s[47]++;return this.get_room(room_id);}is_room_exist(room_id){cov_1huth90sfx().f[7]++;cov_1huth90sfx().s[48]++;if(room_id==null){cov_1huth90sfx().b[14][0]++;cov_1huth90sfx().s[49]++;return false;}else{cov_1huth90sfx().b[14][1]++;}cov_1huth90sfx().s[50]++;return room_id in this.ROOMS_STATE;}get_room(room_id){cov_1huth90sfx().f[8]++;cov_1huth90sfx().s[51]++;if(!this.is_room_exist(room_id)){cov_1huth90sfx().b[15][0]++;cov_1huth90sfx().s[52]++;return null;}else{cov_1huth90sfx().b[15][1]++;}cov_1huth90sfx().s[53]++;return this.ROOMS_STATE[room_id];}is_full(room_id){cov_1huth90sfx().f[9]++;cov_1huth90sfx().s[54]++;//private, should only be use by Room Manager
if(!this.is_room_exist(room_id)){cov_1huth90sfx().b[16][0]++;cov_1huth90sfx().s[55]++;//should not enter here
return false;}else{cov_1huth90sfx().b[16][1]++;}var room=(cov_1huth90sfx().s[56]++,this.get_room(room_id));cov_1huth90sfx().s[57]++;if((cov_1huth90sfx().b[18][0]++,room.p1!=null)&&(cov_1huth90sfx().b[18][1]++,room.p2!=null)){cov_1huth90sfx().b[17][0]++;cov_1huth90sfx().s[58]++;return true;}else{cov_1huth90sfx().b[17][1]++;}cov_1huth90sfx().s[59]++;return false;}valid_room_to_join(user_id,room_id){cov_1huth90sfx().f[10]++;cov_1huth90sfx().s[60]++;if(!this.is_room_exist(room_id)){cov_1huth90sfx().b[19][0]++;cov_1huth90sfx().s[61]++;return false;}else{cov_1huth90sfx().b[19][1]++;}var room=(cov_1huth90sfx().s[62]++,this.get_room(room_id));cov_1huth90sfx().s[63]++;if((cov_1huth90sfx().b[21][0]++,room.p1==user_id)||(cov_1huth90sfx().b[21][1]++,room.p2==user_id)){cov_1huth90sfx().b[20][0]++;cov_1huth90sfx().s[64]++;return true;}else{cov_1huth90sfx().b[20][1]++;}cov_1huth90sfx().s[65]++;if(this.is_full(room_id)){cov_1huth90sfx().b[22][0]++;cov_1huth90sfx().s[66]++;return false;}else{cov_1huth90sfx().b[22][1]++;}cov_1huth90sfx().s[67]++;return true;}get_new_user_id(){cov_1huth90sfx().f[11]++;var new_id=(cov_1huth90sfx().s[68]++,this.generate_random_id());cov_1huth90sfx().s[69]++;while(this.is_user_exist(new_id)){cov_1huth90sfx().s[70]++;new_id=this.generate_random_id();}cov_1huth90sfx().s[71]++;return new_id;}get_new_room_id(){cov_1huth90sfx().f[12]++;var new_id=(cov_1huth90sfx().s[72]++,this.generate_random_id());cov_1huth90sfx().s[73]++;while(this.is_room_exist(new_id)){cov_1huth90sfx().s[74]++;new_id=this.generate_random_id();}cov_1huth90sfx().s[75]++;return new_id;}generate_random_id(){cov_1huth90sfx().f[13]++;//might need a new class in the future
var length=(cov_1huth90sfx().s[76]++,Math.floor(Math.random()*3)+5);var id=(cov_1huth90sfx().s[77]++,[]);cov_1huth90sfx().s[78]++;for(var i=(cov_1huth90sfx().s[79]++,0);i<length;i++){cov_1huth90sfx().s[80]++;id.push(this.CHAR[Math.floor(Math.random()*this.CHAR.length)]);}cov_1huth90sfx().s[81]++;return id.join('');}}cov_1huth90sfx().s[82]++;module.exports=RoomManager;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJvb21NYW5hZ2VyLmpzIl0sIm5hbWVzIjpbIlJvb21NYW5hZ2VyIiwiY29uc3RydWN0b3IiLCJyZXF1ZXN0X2hhbmRsZXIiLCJzaXplIiwiVVNFUl9UT19ST09NIiwiUk9PTVNfU1RBVEUiLCJSRVFVRVNUX0hBTkRMRVIiLCJtYXhfc2l6ZSIsIkNIQVIiLCJhdXRoZW50aWNhdGVfdXNlciIsInVzZXJfaWQiLCJpc191c2VyX2V4aXN0Iiwic3VjY2VzcyIsIm1zZyIsImpvaW5fcm9vbSIsInJvb21faWQiLCJhdXRoX3Jlc3VsdCIsInZhbGlkX3Jvb21fdG9fam9pbiIsInJvb20iLCJnZXRfcm9vbSIsInAxIiwicDIiLCJpc19mdWxsIiwicGF1c2UiLCJjcmVhdGVfcm9vbSIsImxlbmd0aCIsIm5ld19pZCIsImdldF9uZXdfcm9vbV9pZCIsIm5ld19nYW1lIiwibmV3X2NoZXNzX2dhbWUiLCJyb29tX251bWJlciIsImNoZXNzIiwiY3JlYXRlX25ld191c2VyIiwiZ2V0X25ld191c2VyX2lkIiwiZ2V0X3VzZXJfcm9vbSIsImlzX3Jvb21fZXhpc3QiLCJnZW5lcmF0ZV9yYW5kb21faWQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJpZCIsImkiLCJwdXNoIiwiam9pbiIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiIrbFpBQ0EsS0FBTUEsQ0FBQUEsV0FBVyxDQUNmQyxXQUFXLENBQUNDLGVBQUQsQ0FBa0JDLElBQUksNkJBQUMsS0FBRCxDQUF0QixDQUE2QixpREFDdEMsS0FBS0MsWUFBTCxDQUFvQixFQUFwQixDQURzQyx3QkFFdEMsS0FBS0MsV0FBTCxDQUFtQixFQUFuQixDQUZzQyx3QkFHdEMsS0FBS0MsZUFBTCxDQUF1QkosZUFBdkIsQ0FIc0Msd0JBSXRDLEtBQUtLLFFBQUwsQ0FBZ0JKLElBQWhCLENBQ0E7QUFMc0Msd0JBTXRDLEtBQUtLLElBQUwsQ0FBWSxnRUFBWixDQUVELENBQ0RDLGlCQUFpQixDQUFDQyxPQUFELENBQVMsaURB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IlxuY2xhc3MgUm9vbU1hbmFnZXJ7XG4gIGNvbnN0cnVjdG9yKHJlcXVlc3RfaGFuZGxlciwgc2l6ZT0zMDAwMCl7XG4gICAgdGhpcy5VU0VSX1RPX1JPT00gPSB7fTtcbiAgICB0aGlzLlJPT01TX1NUQVRFID0ge307XG4gICAgdGhpcy5SRVFVRVNUX0hBTkRMRVIgPSByZXF1ZXN0X2hhbmRsZXI7XG4gICAgdGhpcy5tYXhfc2l6ZSA9IHNpemU7XG4gICAgLy9mb3IgcmFuZG9tIGdlbmVyYXRvclxuICAgIHRoaXMuQ0hBUiA9ICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWic7XG5cbiAgfVxuICBhdXRoZW50aWNhdGVfdXNlcih1c2VyX2lkKXsgLy9wdWJsaWNcbiAgICBpZighdGhpcy5pc191c2VyX2V4aXN0KHVzZXJfaWQpKVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1zZzogXCJGYWlsZWQgdG8gYXV0aGVudGljYXRlIHRoZSB1c2VyXCJcbiAgICAgIH07XG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBtc2c6IFwiU3VjY2VzcyFcIlxuICAgIH07XG4gIH1cbiAgam9pbl9yb29tKHVzZXJfaWQsIHJvb21faWQpeyAvL3B1YmxpY1xuICAgIHZhciBhdXRoX3Jlc3VsdCA9IHRoaXMuYXV0aGVudGljYXRlX3VzZXIodXNlcl9pZCk7XG4gICAgaWYoIWF1dGhfcmVzdWx0LnN1Y2Nlc3MpXG4gICAgICByZXR1cm4gYXV0aF9yZXN1bHQ7XG5cbiAgICBpZih0aGlzLlVTRVJfVE9fUk9PTVt1c2VyX2lkXSAhPSBudWxsKXtcbiAgICAgIHJldHVybntcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1zZzogXCJZb3UgaGF2ZSBhbHJlYWR5IGpvaW4gYSByb29tXCJcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZighdGhpcy52YWxpZF9yb29tX3RvX2pvaW4odXNlcl9pZCwgcm9vbV9pZCkpXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOmZhbHNlLFxuICAgICAgICBtc2c6IFwiVGhlIHJvb20gaXMgZnVsbCBvciBkb2VzIG5vdCBleGlzdCEgUGxlYXNlIHRyeSBhIGRpZmZlcmVudCByb29tIElEXCJcbiAgICAgIH07XG5cbiAgICB2YXIgcm9vbSA9IHRoaXMuZ2V0X3Jvb20ocm9vbV9pZCk7XG5cbiAgICBpZihyb29tLnAxICE9IHVzZXJfaWQgJiYgcm9vbS5wMiAhPSB1c2VyX2lkKXtcbiAgICAgIGlmKHJvb20ucDEgPT0gbnVsbClcbiAgICAgICAgcm9vbS5wMSA9IHVzZXJfaWQ7XG4gICAgICBlbHNlXG4gICAgICAgIHJvb20ucDIgPSB1c2VyX2lkO1xuICAgIH1cbiAgICB0aGlzLlVTRVJfVE9fUk9PTVt1c2VyX2lkXSA9IHJvb21faWQ7XG4gICAgdmFyIG1zZyA9IFwiU3VjY2VzcyB0byBqb2luIVwiO1xuICAgIGlmKHRoaXMuaXNfZnVsbChyb29tX2lkKSl7XG4gICAgICByb29tLnBhdXNlID0gZmFsc2U7XG4gICAgICBtc2cgPSBcIlJlYWR5IHRvIHN0YXJ0IHRoZSBnYW1lIVwiO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIG1zZzogbXNnXG4gICAgfTtcbiAgfVxuICBjcmVhdGVfcm9vbSh1c2VyX2lkKXsgLy9wdWJsaWNcbiAgICB2YXIgYXV0aF9yZXN1bHQgPSB0aGlzLmF1dGhlbnRpY2F0ZV91c2VyKHVzZXJfaWQpO1xuICAgIGlmKCFhdXRoX3Jlc3VsdC5zdWNjZXNzKVxuICAgICAgcmV0dXJuIGF1dGhfcmVzdWx0O1xuXG4gICAgaWYodGhpcy5ST09NU19TVEFURS5sZW5ndGggPT0gdGhpcy5tYXhfc2l6ZSlcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtc2c6IFwiV2UgaGF2ZSBmaWxsZWQgYWxsIHJvb21zISBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyIVwiXG4gICAgICB9O1xuXG4gICAgaWYodGhpcy5VU0VSX1RPX1JPT01bdXNlcl9pZF0gIT0gbnVsbCl7XG4gICAgICByZXR1cm57XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtc2c6IFwiWW91IGhhdmUgYWxyZWFkeSBqb2luIGEgcm9vbVwiXG4gICAgICB9XG4gICAgfVxuICAgIHZhciBuZXdfaWQgPSB0aGlzLmdldF9uZXdfcm9vbV9pZCgpO1xuXG4gICAgdmFyIG5ld19nYW1lID0gdGhpcy5SRVFVRVNUX0hBTkRMRVIubmV3X2NoZXNzX2dhbWUoKTtcbiAgICAgIHRoaXMuUk9PTVNfU1RBVEVbbmV3X2lkXSA9IHtcbiAgICAgICAgcm9vbV9udW1iZXI6IG5ld19pZCxcbiAgICAgICAgcDE6IHVzZXJfaWQsXG4gICAgICAgIHAyOiBudWxsLFxuICAgICAgICBjaGVzczogbmV3X2dhbWUsXG4gICAgICAgIHBhdXNlOiB0cnVlXG4gICAgICB9XG5cbiAgICAgIHRoaXMuVVNFUl9UT19ST09NW3VzZXJfaWRdID0gbmV3X2lkO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtc2c6IFwiU3VjY2VzcyFcIlxuICAgICAgfTtcbiAgfVxuICBjcmVhdGVfbmV3X3VzZXIoKXsgLy9wdWJsaWNcbiAgICB2YXIgdXNlcl9pZCA9IHRoaXMuZ2V0X25ld191c2VyX2lkKCk7XG4gICAgdGhpcy5VU0VSX1RPX1JPT01bdXNlcl9pZF0gPSBudWxsO1xuICAgIHJldHVybiB1c2VyX2lkO1xuICB9XG4gIGlzX3VzZXJfZXhpc3QodXNlcl9pZCl7XG4gICAgaWYodXNlcl9pZCA9PSBudWxsKVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiAodXNlcl9pZCBpbiB0aGlzLlVTRVJfVE9fUk9PTSk7XG4gIH1cbiAgZ2V0X3VzZXJfcm9vbSh1c2VyX2lkKXsgLy9wdWJsaWNcbiAgICBpZighdGhpcy5pc191c2VyX2V4aXN0KHVzZXJfaWQpKVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgdmFyIHJvb21faWQgPSB0aGlzLlVTRVJfVE9fUk9PTVt1c2VyX2lkXTtcblxuICAgIHJldHVybiB0aGlzLmdldF9yb29tKHJvb21faWQpO1xuICB9XG4gIGlzX3Jvb21fZXhpc3Qocm9vbV9pZCl7XG4gICAgaWYocm9vbV9pZCA9PSBudWxsKVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiAocm9vbV9pZCBpbiB0aGlzLlJPT01TX1NUQVRFKVxuICB9XG4gIGdldF9yb29tKHJvb21faWQpe1xuICAgIGlmKCF0aGlzLmlzX3Jvb21fZXhpc3Qocm9vbV9pZCkpXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gdGhpcy5ST09NU19TVEFURVtyb29tX2lkXTtcbiAgfVxuXG4gIGlzX2Z1bGwocm9vbV9pZCl7IC8vcHJpdmF0ZSwgc2hvdWxkIG9ubHkgYmUgdXNlIGJ5IFJvb20gTWFuYWdlclxuICAgIGlmKCF0aGlzLmlzX3Jvb21fZXhpc3Qocm9vbV9pZCkpIC8vc2hvdWxkIG5vdCBlbnRlciBoZXJlXG4gICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICB2YXIgcm9vbSA9IHRoaXMuZ2V0X3Jvb20ocm9vbV9pZCk7XG4gICAgaWYocm9vbS5wMSAhPSBudWxsICYmIHJvb20ucDIgIT0gbnVsbClcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YWxpZF9yb29tX3RvX2pvaW4odXNlcl9pZCwgcm9vbV9pZCl7XG4gICAgaWYoIXRoaXMuaXNfcm9vbV9leGlzdChyb29tX2lkKSlcbiAgICAgIHJldHVybiBmYWxzZTtcblxuICAgIHZhciByb29tID0gdGhpcy5nZXRfcm9vbShyb29tX2lkKTtcbiAgICBpZihyb29tLnAxID09IHVzZXJfaWQgfHwgcm9vbS5wMiA9PSB1c2VyX2lkKVxuICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICBpZih0aGlzLmlzX2Z1bGwocm9vbV9pZCkpXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgZ2V0X25ld191c2VyX2lkKCl7XG4gICAgdmFyIG5ld19pZCA9IHRoaXMuZ2VuZXJhdGVfcmFuZG9tX2lkKCk7XG4gICAgd2hpbGUodGhpcy5pc191c2VyX2V4aXN0KG5ld19pZCkpe1xuICAgICAgbmV3X2lkID0gdGhpcy5nZW5lcmF0ZV9yYW5kb21faWQoKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ld19pZDtcbiAgfVxuICBnZXRfbmV3X3Jvb21faWQoKXtcbiAgICB2YXIgbmV3X2lkID0gdGhpcy5nZW5lcmF0ZV9yYW5kb21faWQoKTtcbiAgICB3aGlsZSh0aGlzLmlzX3Jvb21fZXhpc3QobmV3X2lkKSl7XG4gICAgICBuZXdfaWQgPSB0aGlzLmdlbmVyYXRlX3JhbmRvbV9pZCgpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3X2lkO1xuICB9XG4gIGdlbmVyYXRlX3JhbmRvbV9pZCgpeyAvL21pZ2h0IG5lZWQgYSBuZXcgY2xhc3MgaW4gdGhlIGZ1dHVyZVxuICAgIHZhciBsZW5ndGggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMykgKyA1O1xuICAgIHZhciBpZCA9IFtdXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKXtcbiAgICAgIGlkLnB1c2godGhpcy5DSEFSW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSp0aGlzLkNIQVIubGVuZ3RoKV0pO1xuICAgIH1cbiAgICByZXR1cm4gaWQuam9pbignJyk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBSb29tTWFuYWdlcjtcbiJdfQ==