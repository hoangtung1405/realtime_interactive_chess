function cov_qdkc43ivj(){var path="/Users/tuanpnm/Class/SE181/realtime_interactive_chess/gameManager.js";var hash="05fb94ec4427afe61aeafdf9f0c9db80d59d1a76";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/tuanpnm/Class/SE181/realtime_interactive_chess/gameManager.js",statementMap:{"0":{start:{line:3,column:4},end:{line:3,column:43}},"1":{start:{line:6,column:4},end:{line:6,column:35}},"2":{start:{line:7,column:15},end:{line:7,column:36}},"3":{start:{line:7,column:45},end:{line:7,column:66}},"4":{start:{line:7,column:75},end:{line:7,column:96}},"5":{start:{line:7,column:105},end:{line:7,column:126}},"6":{start:{line:8,column:4},end:{line:8,column:36}},"7":{start:{line:11,column:4},end:{line:11,column:45}},"8":{start:{line:14,column:4},end:{line:18,column:8}},"9":{start:{line:15,column:6},end:{line:18,column:8}},"10":{start:{line:19,column:16},end:{line:19,column:46}},"11":{start:{line:21,column:4},end:{line:25,column:7}},"12":{start:{line:22,column:6},end:{line:25,column:7}},"13":{start:{line:27,column:4},end:{line:31,column:8}},"14":{start:{line:28,column:6},end:{line:31,column:8}},"15":{start:{line:33,column:4},end:{line:37,column:8}},"16":{start:{line:34,column:6},end:{line:37,column:8}},"17":{start:{line:39,column:4},end:{line:42,column:5}},"18":{start:{line:46,column:22},end:{line:46,column:60}},"19":{start:{line:48,column:4},end:{line:49,column:25}},"20":{start:{line:49,column:6},end:{line:49,column:25}},"21":{start:{line:50,column:15},end:{line:50,column:43}},"22":{start:{line:52,column:4},end:{line:57,column:5}},"23":{start:{line:53,column:6},end:{line:56,column:8}},"24":{start:{line:59,column:15},end:{line:59,column:25}},"25":{start:{line:61,column:17},end:{line:61,column:62}},"26":{start:{line:63,column:4},end:{line:63,column:24}},"27":{start:{line:65,column:4},end:{line:68,column:6}},"28":{start:{line:72,column:0},end:{line:72,column:29}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:2,column:2},end:{line:2,column:3}},loc:{start:{line:2,column:30},end:{line:4,column:3}},line:2},"1":{name:"(anonymous_1)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:22},end:{line:9,column:3}},line:5},"2":{name:"(anonymous_2)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:27},end:{line:12,column:3}},line:10},"3":{name:"(anonymous_3)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:35},end:{line:43,column:3}},line:13},"4":{name:"(anonymous_4)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:39},end:{line:69,column:3}},line:44}},branchMap:{"0":{loc:{start:{line:11,column:11},end:{line:11,column:44}},type:"cond-expr",locations:[{start:{line:11,column:33},end:{line:11,column:37}},{start:{line:11,column:39},end:{line:11,column:44}}],line:11},"1":{loc:{start:{line:14,column:4},end:{line:18,column:8}},type:"if",locations:[{start:{line:14,column:4},end:{line:18,column:8}},{start:{line:14,column:4},end:{line:18,column:8}}],line:14},"2":{loc:{start:{line:14,column:7},end:{line:14,column:47}},type:"binary-expr",locations:[{start:{line:14,column:7},end:{line:14,column:25}},{start:{line:14,column:29},end:{line:14,column:47}}],line:14},"3":{loc:{start:{line:21,column:4},end:{line:25,column:7}},type:"if",locations:[{start:{line:21,column:4},end:{line:25,column:7}},{start:{line:21,column:4},end:{line:25,column:7}}],line:21},"4":{loc:{start:{line:27,column:4},end:{line:31,column:8}},type:"if",locations:[{start:{line:27,column:4},end:{line:31,column:8}},{start:{line:27,column:4},end:{line:31,column:8}}],line:27},"5":{loc:{start:{line:33,column:4},end:{line:37,column:8}},type:"if",locations:[{start:{line:33,column:4},end:{line:37,column:8}},{start:{line:33,column:4},end:{line:37,column:8}}],line:33},"6":{loc:{start:{line:48,column:4},end:{line:49,column:25}},type:"if",locations:[{start:{line:48,column:4},end:{line:49,column:25}},{start:{line:48,column:4},end:{line:49,column:25}}],line:48},"7":{loc:{start:{line:52,column:4},end:{line:57,column:5}},type:"if",locations:[{start:{line:52,column:4},end:{line:57,column:5}},{start:{line:52,column:4},end:{line:57,column:5}}],line:52},"8":{loc:{start:{line:52,column:7},end:{line:52,column:75}},type:"binary-expr",locations:[{start:{line:52,column:7},end:{line:52,column:21}},{start:{line:52,column:25},end:{line:52,column:39}},{start:{line:52,column:43},end:{line:52,column:57}},{start:{line:52,column:61},end:{line:52,column:75}}],line:52}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0,0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"05fb94ec4427afe61aeafdf9f0c9db80d59d1a76"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_qdkc43ivj=function(){return actualCoverage;};return actualCoverage;}cov_qdkc43ivj();class GameManager{constructor(request_handler){cov_qdkc43ivj().f[0]++;cov_qdkc43ivj().s[0]++;this.REQUEST_HANDLER=request_handler;}parse_move(move_str){cov_qdkc43ivj().f[1]++;cov_qdkc43ivj().s[1]++;move_str=move_str.split(',');var row1=(cov_qdkc43ivj().s[2]++,parseInt(move_str[0])),col1=(cov_qdkc43ivj().s[3]++,parseInt(move_str[1])),row2=(cov_qdkc43ivj().s[4]++,parseInt(move_str[2])),col2=(cov_qdkc43ivj().s[5]++,parseInt(move_str[3]));cov_qdkc43ivj().s[6]++;return[row1,col1,row2,col2];}is_player1(user_id,room){cov_qdkc43ivj().f[2]++;cov_qdkc43ivj().s[7]++;return user_id==room.p1?(cov_qdkc43ivj().b[0][0]++,true):(cov_qdkc43ivj().b[0][1]++,false);}valid_to_make_move(user_id,room){cov_qdkc43ivj().f[3]++;cov_qdkc43ivj().s[8]++;if((cov_qdkc43ivj().b[2][0]++,room.p1!=user_id)&&(cov_qdkc43ivj().b[2][1]++,room.p2!=user_id)){cov_qdkc43ivj().b[1][0]++;cov_qdkc43ivj().s[9]++;return{success:false,msg:"Something wrong happened, please refresh the page!"};}else{cov_qdkc43ivj().b[1][1]++;}var is_p1=(cov_qdkc43ivj().s[10]++,this.is_player1(user_id,room));cov_qdkc43ivj().s[11]++;if(is_p1!=room.chess.p1_turn){cov_qdkc43ivj().b[3][0]++;cov_qdkc43ivj().s[12]++;return{success:false,msg:"This is your opponent turn, please wait!"};}else{cov_qdkc43ivj().b[3][1]++;}cov_qdkc43ivj().s[13]++;if(room==null){cov_qdkc43ivj().b[4][0]++;cov_qdkc43ivj().s[14]++;return{success:false,msg:"Invalid room"};}else{cov_qdkc43ivj().b[4][1]++;}cov_qdkc43ivj().s[15]++;if(room.pause==true){cov_qdkc43ivj().b[5][0]++;cov_qdkc43ivj().s[16]++;return{success:false,msg:"Please wait for your opponent to join!"};}else{cov_qdkc43ivj().b[5][1]++;}cov_qdkc43ivj().s[17]++;return{success:true,msg:"Success!"};}make_move(move_string,user_id,room){cov_qdkc43ivj().f[4]++;//public
var valid_check=(cov_qdkc43ivj().s[18]++,this.valid_to_make_move(user_id,room));cov_qdkc43ivj().s[19]++;if(!valid_check.success){cov_qdkc43ivj().b[6][0]++;cov_qdkc43ivj().s[20]++;return valid_check;}else{cov_qdkc43ivj().b[6][1]++;}var move=(cov_qdkc43ivj().s[21]++,this.parse_move(move_string));cov_qdkc43ivj().s[22]++;if((cov_qdkc43ivj().b[8][0]++,isNaN(move[0]))||(cov_qdkc43ivj().b[8][1]++,isNaN(move[1]))||(cov_qdkc43ivj().b[8][2]++,isNaN(move[2]))||(cov_qdkc43ivj().b[8][3]++,isNaN(move[3]))){cov_qdkc43ivj().b[7][0]++;cov_qdkc43ivj().s[23]++;return{success:false,msg:"Invalid move format!"};}else{cov_qdkc43ivj().b[7][1]++;}var game=(cov_qdkc43ivj().s[24]++,room.chess);var result=(cov_qdkc43ivj().s[25]++,game.move(move[0],move[1],move[2],move[3]));cov_qdkc43ivj().s[26]++;console.log(result);cov_qdkc43ivj().s[27]++;return{success:result[0],msg:result[1]};}}cov_qdkc43ivj().s[28]++;module.exports=GameManager;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdhbWVNYW5hZ2VyLmpzIl0sIm5hbWVzIjpbIkdhbWVNYW5hZ2VyIiwiY29uc3RydWN0b3IiLCJyZXF1ZXN0X2hhbmRsZXIiLCJSRVFVRVNUX0hBTkRMRVIiLCJwYXJzZV9tb3ZlIiwibW92ZV9zdHIiLCJzcGxpdCIsInJvdzEiLCJwYXJzZUludCIsImNvbDEiLCJyb3cyIiwiY29sMiIsImlzX3BsYXllcjEiLCJ1c2VyX2lkIiwicm9vbSIsInAxIiwidmFsaWRfdG9fbWFrZV9tb3ZlIiwicDIiLCJzdWNjZXNzIiwibXNnIiwiaXNfcDEiLCJjaGVzcyIsInAxX3R1cm4iLCJwYXVzZSIsIm1ha2VfbW92ZSIsIm1vdmVfc3RyaW5nIiwidmFsaWRfY2hlY2siLCJtb3ZlIiwiaXNOYU4iLCJnYW1lIiwicmVzdWx0IiwiY29uc29sZSIsImxvZyIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiIra0tBQUEsS0FBTUEsQ0FBQUEsV0FBVyxDQUNmQyxXQUFXLENBQUNDLGVBQUQsQ0FBaUIsK0NBQzFCLEtBQUtDLGVBQUwsQ0FBdUJELGVBQXZCLENBQ0QsQ0FDREUsVUFBVSxDQUFDQyxRQUFELENBQVUsK0NBQ2xCQSxRQUFRLENBQUdBLFFBQVEsQ0FBQ0MsS0FBVCxDQUFlLEdBQWYsQ0FBWCxDQUNBLEdBQUlDLENBQUFBLElBQUkseUJBQUdDLFFBQVEsQ0FBQ0gsUUFBUSxDQUFDLENBQUQsQ0FBVCxDQUFYLENBQVIsQ0FBa0NJLElBQUkseUJBQUdELFFBQVEsQ0FBQ0gsUUFBUSxDQUFDLENBQUQsQ0FBVCxDQUFYLENBQXRDLENBQWdFSyxJQUFJLHlCQUFHRixRQUFRLENBQUNILFFBQVEsQ0FBQyxDQUFELENBQVQsQ0FBWCxDQUFwRSxDQUE4Rk0sSUFBSSx5QkFBR0gsUUFBUSxDQUFDSCxRQUFRLENBQUMsQ0FBRCxDQUFULENBQVgsQ0FBbEcsQ0FGa0IsdUJBR2xCLE1BQU8sQ0FBQ0UsSUFBRCxDQUFPRSxJQUFQLENBQWFDLElBQWIsQ0FBbUJDLElBQW5CLENBQVAsQ0FDRCxDQUNEQyxVQUFVLENBQUNDLE9BQUQsQ0FBVUMsSUFBVixDQUFlLCtDQUN2QixNQUFRRCxDQUFBQSxPQUFPLEVBQUlDLElBQUksQ0FBQ0MsRUFBakIsNEJBQXNCLElBQXRCLDZCQUE0QixLQUE1QixDQUFQLENBQ0QsQ0FDREMsa0JBQWtCLENBQUNILE9BQUQsQ0FBVUMsSUFBVixDQUFlLCtDQUMvQixHQUFHLDJCQUFBQSxJQUFJLENBQUNDLEVBQUwsRUFBV0YsT0FBWCw4QkFBc0JDLElBQUksQ0FBQ0csRUFBTCxFQUFXSixPQUFqQyxDQUFILENBQ0Usd0RBQU8sQ0FDTEssT0FBTyxDQUFFLEtBREosQ0FFTEMsR0FBRyxDQUFFLG9EQUZBLENBQVAsQ0FHRSxDQUpKLGdDQUtBLEdBQUlDLENBQUFBLEtBQUssMEJBQUcsS0FBS1IsVUFBTCxDQUFnQkMsT0FBaEIsQ0FBeUJDLElBQXpCLENBQUgsQ0FBVCxDQU4rQix3QkFRL0IsR0FBSU0sS0FBSyxFQUFJTixJQUFJLENBQUNPLEtBQUwsQ0FBV0MsT0FBeEIsQ0FDRSx5REFBTyxDQUNMSixPQUFPLENBQUUsS0FESixDQUVMQyxHQUFHLENBQUUsMENBRkEsQ0FBUCxDQUdDLENBSkgsZ0NBUitCLHdCQWMvQixHQUFHTCxJQUFJLEVBQUksSUFBWCxDQUNFLHlEQUFPLENBQ0xJLE9BQU8sQ0FBRSxLQURKLENBRUxDLEdBQUcsQ0FBRSxjQUZBLENBQVAsQ0FHRSxDQUpKLGdDQWQrQix3QkFvQi9CLEdBQUdMLElBQUksQ0FBQ1MsS0FBTCxFQUFjLElBQWpCLENBQ0UseURBQU8sQ0FDTEwsT0FBTyxDQUFFLEtBREosQ0FFTEMsR0FBRyxDQUFFLHdDQUZBLENBQVAsQ0FHRSxDQUpKLGdDQXBCK0Isd0JBMEIvQixNQUFNLENBQ0pELE9BQU8sQ0FBRSxJQURMLENBRUpDLEdBQUcsQ0FBRSxVQUZELENBQU4sQ0FJRCxDQUNESyxTQUFTLENBQUNDLFdBQUQsQ0FBY1osT0FBZCxDQUF1QkMsSUFBdkIsQ0FBNEIsd0JBQUU7QUFFckMsR0FBSVksQ0FBQUEsV0FBVywwQkFBRyxLQUFLVixrQkFBTCxDQUF3QkgsT0FBeEIsQ0FBaUNDLElBQWpDLENBQUgsQ0FBZixDQUZtQyx3QkFJbkMsR0FBRyxDQUFDWSxXQUFXLENBQUNSLE9BQWhCLENBQ0UseURBQU9RLENBQUFBLFdBQVAsQ0FBbUIsQ0FEckIsZ0NBRUEsR0FBSUMsQ0FBQUEsSUFBSSwwQkFBRyxLQUFLdkIsVUFBTCxDQUFnQnFCLFdBQWhCLENBQUgsQ0FBUixDQU5tQyx3QkFRbkMsR0FBRywyQkFBQUcsS0FBSyxDQUFDRCxJQUFJLENBQUMsQ0FBRCxDQUFMLENBQUwsOEJBQWtCQyxLQUFLLENBQUNELElBQUksQ0FBQyxDQUFELENBQUwsQ0FBdkIsOEJBQW9DQyxLQUFLLENBQUNELElBQUksQ0FBQyxDQUFELENBQUwsQ0FBekMsOEJBQXNEQyxLQUFLLENBQUNELElBQUksQ0FBQyxDQUFELENBQUwsQ0FBM0QsQ0FBSCxDQUF3RSxtREFDdEUsTUFBTyxDQUNMVCxPQUFPLENBQUUsS0FESixDQUVMQyxHQUFHLENBQUUsc0JBRkEsQ0FBUCxDQUlELENBTEQsZ0NBT0EsR0FBSVUsQ0FBQUEsSUFBSSwwQkFBR2YsSUFBSSxDQUFDTyxLQUFSLENBQVIsQ0FFQSxHQUFJUyxDQUFBQSxNQUFNLDBCQUFHRCxJQUFJLENBQUNGLElBQUwsQ0FBVUEsSUFBSSxDQUFDLENBQUQsQ0FBZCxDQUFtQkEsSUFBSSxDQUFDLENBQUQsQ0FBdkIsQ0FBNEJBLElBQUksQ0FBQyxDQUFELENBQWhDLENBQXFDQSxJQUFJLENBQUMsQ0FBRCxDQUF6QyxDQUFILENBQVYsQ0FqQm1DLHdCQW1CbkNJLE9BQU8sQ0FBQ0MsR0FBUixDQUFZRixNQUFaLEVBbkJtQyx3QkFxQm5DLE1BQU8sQ0FDTFosT0FBTyxDQUFFWSxNQUFNLENBQUMsQ0FBRCxDQURWLENBRUxYLEdBQUcsQ0FBRVcsTUFBTSxDQUFDLENBQUQsQ0FGTixDQUFQLENBSUQsQ0FwRWMsQyx3QkF1RWpCRyxNQUFNLENBQUNDLE9BQVAsQ0FBaUJsQyxXQUFqQiIsInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEdhbWVNYW5hZ2Vye1xuICBjb25zdHJ1Y3RvcihyZXF1ZXN0X2hhbmRsZXIpe1xuICAgIHRoaXMuUkVRVUVTVF9IQU5ETEVSID0gcmVxdWVzdF9oYW5kbGVyO1xuICB9XG4gIHBhcnNlX21vdmUobW92ZV9zdHIpe1xuICAgIG1vdmVfc3RyID0gbW92ZV9zdHIuc3BsaXQoJywnKTtcbiAgICB2YXIgcm93MSA9IHBhcnNlSW50KG1vdmVfc3RyWzBdKSwgY29sMSA9IHBhcnNlSW50KG1vdmVfc3RyWzFdKSwgcm93MiA9IHBhcnNlSW50KG1vdmVfc3RyWzJdKSwgY29sMiA9IHBhcnNlSW50KG1vdmVfc3RyWzNdKTtcbiAgICByZXR1cm4gW3JvdzEsIGNvbDEsIHJvdzIsIGNvbDJdO1xuICB9XG4gIGlzX3BsYXllcjEodXNlcl9pZCwgcm9vbSl7XG4gICAgcmV0dXJuICh1c2VyX2lkID09IHJvb20ucDEpPyB0cnVlOiBmYWxzZTtcbiAgfVxuICB2YWxpZF90b19tYWtlX21vdmUodXNlcl9pZCwgcm9vbSl7XG4gICAgaWYocm9vbS5wMSAhPSB1c2VyX2lkICYmIHJvb20ucDIgIT0gdXNlcl9pZClcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtc2c6IFwiU29tZXRoaW5nIHdyb25nIGhhcHBlbmVkLCBwbGVhc2UgcmVmcmVzaCB0aGUgcGFnZSFcIlxuICAgICAgfTtcbiAgICB2YXIgaXNfcDEgPSB0aGlzLmlzX3BsYXllcjEodXNlcl9pZCwgcm9vbSk7XG5cbiAgICBpZiggaXNfcDEgIT0gcm9vbS5jaGVzcy5wMV90dXJuKVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1zZzogXCJUaGlzIGlzIHlvdXIgb3Bwb25lbnQgdHVybiwgcGxlYXNlIHdhaXQhXCJcbiAgICAgIH1cblxuICAgIGlmKHJvb20gPT0gbnVsbClcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtc2c6IFwiSW52YWxpZCByb29tXCJcbiAgICAgIH07XG5cbiAgICBpZihyb29tLnBhdXNlID09IHRydWUpXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbXNnOiBcIlBsZWFzZSB3YWl0IGZvciB5b3VyIG9wcG9uZW50IHRvIGpvaW4hXCJcbiAgICAgIH07XG5cbiAgICByZXR1cm57XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbXNnOiBcIlN1Y2Nlc3MhXCJcbiAgICB9XG4gIH1cbiAgbWFrZV9tb3ZlKG1vdmVfc3RyaW5nLCB1c2VyX2lkLCByb29tKXsgLy9wdWJsaWNcblxuICAgIHZhciB2YWxpZF9jaGVjayA9IHRoaXMudmFsaWRfdG9fbWFrZV9tb3ZlKHVzZXJfaWQsIHJvb20pO1xuXG4gICAgaWYoIXZhbGlkX2NoZWNrLnN1Y2Nlc3MpXG4gICAgICByZXR1cm4gdmFsaWRfY2hlY2s7XG4gICAgdmFyIG1vdmUgPSB0aGlzLnBhcnNlX21vdmUobW92ZV9zdHJpbmcpO1xuXG4gICAgaWYoaXNOYU4obW92ZVswXSkgfHwgaXNOYU4obW92ZVsxXSkgfHwgaXNOYU4obW92ZVsyXSkgfHwgaXNOYU4obW92ZVszXSkpe1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1zZzogXCJJbnZhbGlkIG1vdmUgZm9ybWF0IVwiXG4gICAgICB9O1xuICAgIH1cblxuICAgIHZhciBnYW1lID0gcm9vbS5jaGVzcztcblxuICAgIHZhciByZXN1bHQgPSBnYW1lLm1vdmUobW92ZVswXSwgbW92ZVsxXSwgbW92ZVsyXSwgbW92ZVszXSk7XG5cbiAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IHJlc3VsdFswXSxcbiAgICAgIG1zZzogcmVzdWx0WzFdXG4gICAgfTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEdhbWVNYW5hZ2VyO1xuIl19